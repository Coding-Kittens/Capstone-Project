{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useParams,useNavigate}from\"react-router-dom\";import{useEffect,useContext}from\"react\";import Card from\"../pieces/Card\";import useAxios from\"../hooks/useAxios\";import{UserContext}from\"../context/context\";//shows all the users libraries\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserLibraries=function UserLibraries(){var currentUser=useContext(UserContext);var navigate=useNavigate();var _useParams=useParams(),username=_useParams.username;var _useAxios=useAxios(null),_useAxios2=_slicedToArray(_useAxios,3),reqLibraries=_useAxios2[0],libraries=_useAxios2[1],setLibraries=_useAxios2[2];//gets all the users libraries\nuseEffect(function(){reqLibraries(\"get\",\"/users/libraries/\".concat(username),\"libraries\");},[]);//deletes a library\nvar deleteLibrary=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return reqLibraries(\"delete\",\"/libraries/\".concat(id));case 2:res=_context.sent;if(res.message===\"Deleted!\")setLibraries(libraries.filter(function(library){return library.id!=id;}));case 4:case\"end\":return _context.stop();}},_callee);}));return function deleteLibrary(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"ListPage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\".concat(username,\"'s Libraries\")}),libraries?libraries.map(function(library){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card,{title:library.name,texts:[library.description,\"\".concat(library.is_public?\"public\":\"private\")],handleClick:function handleClick(){return navigate(\"/library/\".concat(library.id));}}),currentUser.username===username?/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return deleteLibrary(library.id);},name:\"button\",children:\"X\"}):null]},library.id);}):null,currentUser.username===username?/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return navigate(\"/new/library\");},name:\"button\",children:\"New Library\"}):null]});};export default UserLibraries;","map":{"version":3,"names":["useParams","useNavigate","useEffect","useContext","Card","useAxios","UserContext","jsx","_jsx","jsxs","_jsxs","UserLibraries","currentUser","navigate","_useParams","username","_useAxios","_useAxios2","_slicedToArray","reqLibraries","libraries","setLibraries","concat","deleteLibrary","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","res","wrap","_callee$","_context","prev","next","sent","message","filter","library","stop","_x","apply","arguments","className","children","map","title","name","texts","description","is_public","handleClick","type","onClick"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/front/src/pages/UserLibraries.js"],"sourcesContent":["import { useParams, useNavigate } from \"react-router-dom\";\nimport { useEffect, useContext } from \"react\";\nimport Card from \"../pieces/Card\";\nimport useAxios from \"../hooks/useAxios\";\nimport { UserContext } from \"../context/context\";\n\n//shows all the users libraries\nconst UserLibraries = () => {\n  const currentUser = useContext(UserContext);\n  const navigate = useNavigate();\n  const { username } = useParams();\n  const [reqLibraries, libraries, setLibraries] = useAxios(null);\n\n  //gets all the users libraries\n  useEffect(() => {\n    reqLibraries(\"get\", `/users/libraries/${username}`, \"libraries\");\n  }, []);\n\n  //deletes a library\n  const deleteLibrary = async (id) => {\n    const res = await reqLibraries(\"delete\", `/libraries/${id}`);\n    if (res.message === \"Deleted!\")\n      setLibraries(libraries.filter((library) => library.id != id));\n  };\n\n  return (\n    <div className=\"ListPage\">\n      <h1>{`${username}'s Libraries`}</h1>\n      {libraries\n        ? libraries.map((library) => (\n            <div key={library.id}>\n              <Card\n                title={library.name}\n                texts={[\n                  library.description,\n                  `${library.is_public ? \"public\" : \"private\"}`,\n                ]}\n                handleClick={() => navigate(`/library/${library.id}`)}\n              />\n              {currentUser.username === username ? (\n                <button\n                  type=\"button\"\n                  onClick={() => deleteLibrary(library.id)}\n                  name=\"button\"\n                >\n                  X\n                </button>\n              ) : null}\n            </div>\n          ))\n        : null}\n      {currentUser.username === username ? (\n        <button\n          type=\"button\"\n          onClick={() => navigate(\"/new/library\")}\n          name=\"button\"\n        >\n          New Library\n        </button>\n      ) : null}\n    </div>\n  );\n};\nexport default UserLibraries;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}