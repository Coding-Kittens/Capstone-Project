{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rosepowell/Desktop/desktop stuff/myprojects/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/desktop stuff/myprojects/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/desktop stuff/myprojects/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Place from\"./Place\";import PlaceForm from\"../forms/PlaceForm\";import{useState,useEffect}from\"react\";import noteBook from\"../sprites/notes1.png\";import useAxios from\"../hooks/useAxios\";//shows all the places for a book\n//lets you look at just one place\n//you can flip between places\n//you can add edit or delete a place\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PlaceBook=function PlaceBook(_ref){var bookId=_ref.bookId;var _useAxios=useAxios([],true),_useAxios2=_slicedToArray(_useAxios,3),reqPlaces=_useAxios2[0],places=_useAxios2[1],setPlaces=_useAxios2[2];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currPlace=_useState2[0],setCurrPlace=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),addForm=_useState4[0],setAddForm=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),editForm=_useState6[0],setEditForm=_useState6[1];//gets all the places for a book\nuseEffect(function(){reqPlaces(\"get\",\"/books/\".concat(bookId,\"/places\"),\"places\");},[]);//changes the current place so you can flip between places\nvar changePlace=function changePlace(num){var newPlace=currPlace?currPlace+num:num;if(newPlace<0)newPlace=null;if(newPlace>places.length)newPlace=0;setCurrPlace(newPlace);};//adds a place\nvar addPlace=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:reqPlaces(\"post\",\"/books/\".concat(bookId,\"/places\"),\"place\",data);case 1:case\"end\":return _context.stop();}},_callee);}));return function addPlace(_x){return _ref2.apply(this,arguments);};}();//deletes a place\nvar deletePlace=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(placeId){var res,updatedPlaces;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return reqPlaces(\"delete\",\"/books/\".concat(bookId,\"/places/\").concat(placeId));case 2:res=_context2.sent;if(res.message===\"Deleted!\"){//if you are on that place page it changes it to the place before the current one\nif(currPlace){if(places[currPlace-1].id===placeId){changePlace(-1);}}updatedPlaces=places.filter(function(place){if(place.id!==placeId)return place;});if(!updatedPlaces[0])updatedPlaces=[];setPlaces(function(){return updatedPlaces;});}case 4:case\"end\":return _context2.stop();}},_callee2);}));return function deletePlace(_x2){return _ref3.apply(this,arguments);};}();//edits a place\nvar editPlace=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(data){var placeId;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:placeId=places[currPlace-1].id;reqPlaces(\"patch\",\"/books/\".concat(bookId,\"/places/\").concat(placeId),\"place\",data);case 2:case\"end\":return _context3.stop();}},_callee3);}));return function editPlace(_x3){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{className:\"CharacterBook_Image\",src:noteBook,alt:\"NoteBook\"}),currPlace&&editForm?/*#__PURE__*/_jsx(PlaceForm,{closeForm:function closeForm(){return setEditForm(false);},submit:editPlace,place:places[currPlace-1],submitText:\"Edit Place\"}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"CharacterBook\",children:[currPlace?null:/*#__PURE__*/_jsx(\"h3\",{children:\"Table of Contents\"}),currPlace&&places.length>0?/*#__PURE__*/_jsx(Place,{handleClick:function handleClick(){return setEditForm(true);},place:places[currPlace-1],deletePlace:deletePlace}):places.map(function(place,inx){return/*#__PURE__*/_jsxs(\"div\",{className:\"CharLink\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return changePlace(inx+1);},name:\"button\",children:place.name}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return deletePlace(place.id);},name:\"button\",children:\"X\"})]},place.id);})]}),addForm?/*#__PURE__*/_jsx(PlaceForm,{closeForm:function closeForm(){return setAddForm(false);},submit:addPlace,submitText:\"Add Place\"}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"CharacterBook_button\",onClick:function onClick(){return setAddForm(true);},name:\"button\",children:\"New place\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"CharacterBook_Back\",onClick:function onClick(){return changePlace(-1);}}),/*#__PURE__*/_jsx(\"div\",{className:\"CharacterBook_Next\",onClick:function onClick(){return changePlace(1);}})]});};export default PlaceBook;","map":{"version":3,"names":["Place","PlaceForm","useState","useEffect","noteBook","useAxios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PlaceBook","_ref","bookId","_useAxios","_useAxios2","_slicedToArray","reqPlaces","places","setPlaces","_useState","_useState2","currPlace","setCurrPlace","_useState3","_useState4","addForm","setAddForm","_useState5","_useState6","editForm","setEditForm","concat","changePlace","num","newPlace","length","addPlace","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","stop","_x","apply","arguments","deletePlace","_ref3","_callee2","placeId","res","updatedPlaces","_callee2$","_context2","sent","message","id","filter","place","_x2","editPlace","_ref4","_callee3","_callee3$","_context3","_x3","children","className","src","alt","closeForm","submit","submitText","handleClick","map","inx","type","onClick","name"],"sources":["/Users/rosepowell/Desktop/desktop stuff/myprojects/Book_Writing/book_writing/front/src/notes/PlaceBook.js"],"sourcesContent":["import Place from \"./Place\";\nimport PlaceForm from \"../forms/PlaceForm\";\n\nimport { useState, useEffect } from \"react\";\n\nimport noteBook from \"../sprites/notes1.png\";\nimport useAxios from \"../hooks/useAxios\";\n\n//shows all the places for a book\n//lets you look at just one place\n//you can flip between places\n//you can add edit or delete a place\nconst PlaceBook = ({ bookId }) => {\n  const [reqPlaces, places, setPlaces] = useAxios([], true);\n  const [currPlace, setCurrPlace] = useState(null);\n  const [addForm, setAddForm] = useState(false);\n  const [editForm, setEditForm] = useState(false);\n\n\n  //gets all the places for a book\n  useEffect(() => {\n    reqPlaces(\"get\", `/books/${bookId}/places`, \"places\");\n  }, []);\n\n  //changes the current place so you can flip between places\n  const changePlace = (num) => {\n    let newPlace = currPlace ? currPlace + num : num;\n    if (newPlace < 0) newPlace = null;\n    if (newPlace > places.length) newPlace = 0;\n    setCurrPlace(newPlace);\n  };\n\n  //adds a place\n  const addPlace = async (data) => {\n    reqPlaces(\"post\", `/books/${bookId}/places`, \"place\", data);\n  };\n\n  //deletes a place\n  const deletePlace = async (placeId) => {\n    const res = await reqPlaces(\"delete\", `/books/${bookId}/places/${placeId}`);\n\n    if (res.message === \"Deleted!\") {\n      //if you are on that place page it changes it to the place before the current one\n      if (currPlace) {\n        if (places[currPlace - 1].id === placeId) {\n          changePlace(-1);\n        }\n      }\n      let updatedPlaces = places.filter((place) => {\n        if (place.id !== placeId) return place;\n      });\n      if (!updatedPlaces[0]) updatedPlaces = [];\n      setPlaces(() => (updatedPlaces));\n    }\n  };\n\n  //edits a place\n  const editPlace = async (data) => {\n    const placeId = places[currPlace - 1].id;\n    reqPlaces(\"patch\", `/books/${bookId}/places/${placeId}`, \"place\", data);\n  };\n\n  return (\n    <>\n      <img className=\"CharacterBook_Image\" src={noteBook} alt=\"NoteBook\" />\n\n      {currPlace && editForm ? (\n        <PlaceForm\n        closeForm={() => setEditForm(false)}\n        submit={editPlace}\n        place ={places[currPlace - 1]}\n        submitText=\"Edit Place\"\n        />\n      ) : null}\n\n      <div className=\"CharacterBook\">\n        {currPlace ? null : <h3>Table of Contents</h3>}\n\n        {currPlace && places.length > 0 ? (\n          <Place\n            handleClick={() => setEditForm(true)}\n            place={places[currPlace - 1]}\n            deletePlace={deletePlace}\n          />\n        ) : (\n          places.map((place, inx) => (\n            <div className=\"CharLink\" key={place.id}>\n              <button\n                type=\"button\"\n                onClick={() => changePlace(inx + 1)}\n                name=\"button\"\n              >\n                {place.name}\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => deletePlace(place.id)}\n                name=\"button\"\n              >\n                X\n              </button>\n            </div>\n          ))\n        )}\n      </div>\n\n      {addForm ? (\n        <PlaceForm\n        closeForm={() => setAddForm(false)}\n        submit={addPlace}\n        submitText=\"Add Place\"\n        />\n      ) : (\n        <>\n          <button\n            type=\"button\"\n            className=\"CharacterBook_button\"\n            onClick={() => setAddForm(true)}\n            name=\"button\"\n          >\n            New place\n          </button>\n        </>\n      )}\n\n      <div className=\"CharacterBook_Back\" onClick={() => changePlace(-1)}></div>\n      <div className=\"CharacterBook_Next\" onClick={() => changePlace(1)}></div>\n    </>\n  );\n};\nexport default PlaceBook;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}