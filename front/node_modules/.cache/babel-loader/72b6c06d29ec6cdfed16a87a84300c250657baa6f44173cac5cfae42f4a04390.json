{"ast":null,"code":"var _jsxFileName = \"/Users/rosepowell/Desktop/Book_Writing/book_writing/src/Book.js\",\n  _s = $RefreshSig$();\nimport cover from './sprites/OpenBook1.png';\nimport page from './sprites/OpenBookPages.png';\nimport { useState, useEffect } from 'react';\nimport InputPage from './InputPage';\nimport Page from './Page';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Book = _ref => {\n  _s();\n  let {\n    areReading,\n    bookId\n  } = _ref;\n  const [pages, setPages] = useState();\n  const [pageNum, setPageNum] = useState([1, 2]); //maybe later keep track of what page they were on last and add it to the book in the db\n\n  useEffect(() => {\n    const getPages = async () => {\n      const res = await axios.get(`/books/${bookId}/pages`);\n      if (res.data.pages) {\n        setPages(n => n = res.data.pages);\n      } else if (!areReading) {\n        addPage();\n      }\n    };\n    getPages();\n  }, []);\n  const nextPage = async () => {\n    if (pageNum[1] + 2 > pages.length) {\n      await addPage();\n      if (!areReading) setPageNum(n => n = [pageNum[0] + 2, pageNum[1] + 2]);\n    } else {\n      setPageNum(n => n = [pageNum[0] + 2, pageNum[1] + 2]);\n    }\n  };\n  const prevPage = () => {\n    if (pageNum[0] - 2 > 0) {\n      setPageNum(n => n = [pageNum[0] - 2, pageNum[1] - 2]);\n    }\n  };\n  const addPage = async () => {\n    let res = await axios.post(`/books/${bookId}/pages`, {\n      page_num: pageNum[1] + 1,\n      num_of_pages: 2\n    });\n    if (res.data.pages) {\n      setPages(n => n = [...pages, ...res.data.pages]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Book\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"Book_cover\",\n      src: cover,\n      alt: \"cover\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"Book_pages\",\n      src: page,\n      alt: \"pages\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 1\n    }, this), areReading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Page, {\n        pageNum: pageNum[0],\n        changePage: prevPage,\n        text: pages[pageNum[0] - 1]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 3\n      }, this), \" \", /*#__PURE__*/_jsxDEV(Page, {\n        pageNum: pageNum[1],\n        changePage: nextPage,\n        text: pages[pageNum[1] - 1]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 81\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(InputPage, {\n        pageNum: pageNum[0],\n        changePage: prevPage,\n        text: pages[pageNum[0] - 1]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(InputPage, {\n        pageNum: pageNum[1],\n        changePage: nextPage,\n        text: pages[pageNum[1] - 1]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 85\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 8\n  }, this);\n};\n_s(Book, \"Xv4WN1Y8VDKfxfTWVdHH/te13HQ=\");\n_c = Book;\nexport default Book;\nvar _c;\n$RefreshReg$(_c, \"Book\");","map":{"version":3,"names":["cover","page","useState","useEffect","InputPage","Page","axios","Book","areReading","bookId","pages","setPages","pageNum","setPageNum","getPages","res","get","data","n","addPage","nextPage","length","prevPage","post","page_num","num_of_pages"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/Book.js"],"sourcesContent":["import cover from './sprites/OpenBook1.png'\nimport page from './sprites/OpenBookPages.png'\nimport {useState,useEffect} from 'react';\nimport InputPage from './InputPage'\nimport Page from './Page'\nimport axios from 'axios';\nconst Book =({areReading,bookId})=>{\n\nconst [pages,setPages]=useState();\nconst [pageNum,setPageNum]=useState([1,2]);//maybe later keep track of what page they were on last and add it to the book in the db\n\n\nuseEffect(()=>{\nconst getPages = async()=>{\n  const res = await axios.get(`/books/${bookId}/pages`);\n  if(res.data.pages){\n    setPages((n)=> n= res.data.pages);\n  }\n  else if(!areReading){\n    addPage();\n  }\n\n}\ngetPages();\n},[])\n\n\n\nconst nextPage = async()=>{\n  if(pageNum[1]+2 > pages.length){\n    await addPage();\n    if(!areReading) setPageNum((n)=> n=[pageNum[0]+2,pageNum[1]+2]);\n  }else{\n    setPageNum((n)=> n=[pageNum[0]+2,pageNum[1]+2]);\n  }\n}\n\nconst prevPage = ()=>{\n  if(pageNum[0]-2 >0){\n    setPageNum((n)=> n=[pageNum[0]-2,pageNum[1]-2]);\n  }\n}\n\nconst addPage =async()=>{\n let res = await axios.post(`/books/${bookId}/pages`,{page_num: pageNum[1]+1,num_of_pages:2});\nif(res.data.pages){\n  setPages((n)=> n= [...pages,...res.data.pages]);\n}\n}\n\nreturn <div className ='Book'>\n\n<img className ='Book_cover' src={cover} alt=\"cover\"/>\n<img className ='Book_pages' src={page} alt=\"pages\"/>\n{\n  areReading?\n  <>\n  <Page pageNum={pageNum[0]} changePage={prevPage} text={pages[pageNum[0]-1]}/> <Page pageNum={pageNum[1]} changePage={nextPage} text={pages[pageNum[1]-1]}/>\n  </>\n  : <>\n  <InputPage pageNum={pageNum[0]} changePage={prevPage} text={pages[pageNum[0]-1]}/><InputPage pageNum={pageNum[1]} changePage={nextPage} text={pages[pageNum[1]-1]}/>\n  </>\n}\n\n</div>\n}\nexport default Book;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}