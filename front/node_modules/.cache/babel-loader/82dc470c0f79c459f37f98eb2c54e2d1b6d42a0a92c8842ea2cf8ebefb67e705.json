{"ast":null,"code":"var _jsxFileName = \"/Users/rosepowell/Desktop/Book_Writing/book_writing/src/libraries/Library.js\",\n  _s = $RefreshSig$();\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useState, useEffect, useContext } from \"react\";\nimport useAxios from \"../hooks/useAxios\";\nimport NewLibraryBook from \"../forms/NewLibraryBook\";\nimport LibraryBook from \"./LibraryBook\";\nimport Card from \"../pieces/Card\";\nimport { UserContext } from \"../context/context\";\n\n//show the library info and all the books in the library\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Library = () => {\n  _s();\n  const currentUser = useContext(UserContext);\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [reqBooks, books, setBooks] = useAxios([]);\n  const [reqLibrary, library] = useAxios(null);\n  const [addForm, setAddForm] = useState(false);\n\n  //gets the library and its books\n  useEffect(() => {\n    reqBooks(\"get\", `/libraries/${id}/books`, \"books\");\n    reqLibrary(\"get\", `/libraries/${id}`, \"library\");\n  }, []);\n\n  //adds a book to the library\n  const addBook = async data => {\n    await reqBooks(\"post\", `/users/${library.username}/libraries/books`, \"\", {\n      libraries: [id],\n      books: Object.keys(data)\n    });\n    await reqBooks(\"get\", `/libraries/${id}/books`, \"books\");\n    setAddForm(false);\n  };\n\n  //delets a book from the library\n  const deleteBook = async bookId => {\n    const res = await reqBooks(\"delete\", `/libraries/${id}/books/${bookId}`);\n    if (res.message === \"Deleted!\") setBooks(() => books.filter(book => book.id != bookId));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ListPage\",\n    children: [library ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Library\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: library.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [library.description, \", this library is\", \" \", library.is_public ? \"public\" : \"not public\", \".\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this) : null, books.length > 0 ? /*#__PURE__*/_jsxDEV(\"ol\", {\n      children: books.map(book => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(LibraryBook, {\n          book: book,\n          deleteBook: deleteBook\n        }, book.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this) : null, library ? currentUser.username === library.username ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        title: \"Add book\",\n        handleClick: () => setAddForm(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => navigate(`/edit/library/${id}`),\n        name: \"button\",\n        children: \"Edit Library\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true) : null : null, addForm ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Library_Add_Book\",\n      children: [/*#__PURE__*/_jsxDEV(NewLibraryBook, {\n        addBook: addBook,\n        username: library.username,\n        title: \"title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setAddForm(false),\n        name: \"button\",\n        children: \"Cancle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(Library, \"yJSm2+4bBdc7ZftNS3tK9TSCUHw=\", false, function () {\n  return [useParams, useNavigate, useAxios, useAxios];\n});\n_c = Library;\nexport default Library;\nvar _c;\n$RefreshReg$(_c, \"Library\");","map":{"version":3,"names":["useParams","useNavigate","useState","useEffect","useContext","useAxios","NewLibraryBook","LibraryBook","Card","UserContext","Library","currentUser","id","navigate","reqBooks","books","setBooks","reqLibrary","library","addForm","setAddForm","addBook","data","username","libraries","Object","keys","deleteBook","bookId","res","message","filter","book","name","description","is_public","length","map"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/libraries/Library.js"],"sourcesContent":["import { useParams, useNavigate } from \"react-router-dom\";\nimport { useState, useEffect, useContext } from \"react\";\nimport useAxios from \"../hooks/useAxios\";\nimport NewLibraryBook from \"../forms/NewLibraryBook\";\nimport LibraryBook from \"./LibraryBook\";\nimport Card from \"../pieces/Card\";\nimport { UserContext } from \"../context/context\";\n\n//show the library info and all the books in the library\nconst Library = () => {\n  const currentUser = useContext(UserContext);\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [reqBooks, books, setBooks] = useAxios([]);\n  const [reqLibrary, library] = useAxios(null);\n  const [addForm, setAddForm] = useState(false);\n\n  //gets the library and its books\n  useEffect(() => {\n    reqBooks(\"get\", `/libraries/${id}/books`, \"books\");\n    reqLibrary(\"get\", `/libraries/${id}`, \"library\");\n  }, []);\n\n  //adds a book to the library\n  const addBook = async (data) => {\n     await reqBooks(\n      \"post\",\n      `/users/${library.username}/libraries/books`,\n      \"\",\n      { libraries: [id], books: Object.keys(data) }\n    );\n    await reqBooks(\"get\", `/libraries/${id}/books`, \"books\");\n    setAddForm(false);\n  };\n\n  //delets a book from the library\n  const deleteBook = async (bookId) => {\n    const res = await reqBooks(\"delete\", `/libraries/${id}/books/${bookId}`);\n    if (res.message === \"Deleted!\")\n      setBooks(() => (books.filter((book) => book.id != bookId)));\n  };\n\n  return (\n    <div className=\"ListPage\">\n      {library ? (\n        <div className=\"Library\">\n          <h1>{library.name}</h1>\n          <p>\n            {library.description}, this library is{\" \"}\n            {library.is_public ? \"public\" : \"not public\"}.{\" \"}\n          </p>\n        </div>\n      ) : null}\n      {books.length > 0 ? (\n        <ol>\n          {books.map((book) => (\n            <li>\n              <LibraryBook key={book.id} book={book} deleteBook={deleteBook} />\n            </li>\n          ))}\n        </ol>\n      ) : null}\n\n      {library ? (\n        currentUser.username === library.username ? (\n          <>\n            <Card title=\"Add book\" handleClick={() => setAddForm(true)} />\n            <button\n              type=\"button\"\n              onClick={() => navigate(`/edit/library/${id}`)}\n              name=\"button\"\n            >\n              Edit Library\n            </button>\n          </>\n        ) : null\n      ) : null}\n\n      {addForm ? (\n        <div className=\"Library_Add_Book\">\n          <NewLibraryBook\n            addBook={addBook}\n            username={library.username}\n            title={\"title\"}\n          />\n          <button type=\"button\" onClick={() => setAddForm(false)} name=\"button\">\n            Cancle\n          </button>\n        </div>\n      ) : null}\n    </div>\n  );\n};\nexport default Library;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}