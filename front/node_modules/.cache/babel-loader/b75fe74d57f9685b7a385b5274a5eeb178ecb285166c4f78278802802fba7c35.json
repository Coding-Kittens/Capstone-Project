{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import PopUpForm from\"../forms/PopUpForm\";import{useState,useEffect}from\"react\";import noteBook from\"../sprites/notes1.png\";import useAxios from\"../hooks/useAxios\";import\"../css/CharacterBook.css\";import NotePage from\"./NotePage\";//shows all the notes for a book\n//lets you look at just one note\n//you can flip between notes\n//you can add edit or delete a note\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NoteBook=function NoteBook(_ref){var bookId=_ref.bookId;var _useAxios=useAxios([],true),_useAxios2=_slicedToArray(_useAxios,3),reqNotes=_useAxios2[0],notes=_useAxios2[1],setNotes=_useAxios2[2];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currNote=_useState2[0],setCurrNote=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),addForm=_useState4[0],setAddForm=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),editForm=_useState6[0],setEditForm=_useState6[1];//gets all the notes for a book\nuseEffect(function(){reqNotes(\"get\",\"/books/\".concat(bookId,\"/notes\"),\"notes\");},[]);//changes the current note so you can flip between notes\nvar changeNote=function changeNote(num){var newNote=currNote?currNote+num:num;if(newNote<0)newNote=null;if(newNote>notes.length)newNote=0;setCurrNote(newNote);};//adds a note\nvar addNote=function addNote(data){reqNotes(\"post\",\"/books/\".concat(bookId,\"/notes\"),\"note\",data);};//deletes a note\nvar deleteNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(noteId){var res,updatedNotes;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return reqNotes(\"delete\",\"/books/\".concat(bookId,\"/notes/\").concat(noteId));case 2:res=_context.sent;if(res.message===\"Deleted!\"){//if you are on that note page it changes it to the note before the current one\nif(currNote){if(notes[currNote-1].id===noteId){changeNote(-1);}}updatedNotes=notes.filter(function(note){if(note.id!=noteId)return note;});if(!updatedNotes[0])updatedNotes=[];setNotes(function(){return updatedNotes;});}case 4:case\"end\":return _context.stop();}},_callee);}));return function deleteNote(_x){return _ref2.apply(this,arguments);};}();//edits a note\nvar editNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var noteId;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:noteId=notes[currNote-1].id;reqNotes(\"patch\",\"/notes/\".concat(noteId),\"note\",data);case 2:case\"end\":return _context2.stop();}},_callee2);}));return function editNote(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{className:\"CharacterBook_Image\",src:noteBook,alt:\"NoteBook\"}),currNote&&editForm?/*#__PURE__*/_jsx(PopUpForm,{closeForm:function closeForm(){return setEditForm(false);},submit:editNote,inputs:[{title:\"Title\",name:\"title\"},{title:\"Text\",name:\"text\"}],initData:{title:notes[currNote-1].title,text:notes[currNote-1].text},submitText:\"Edit Note\"}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"CharacterBook\",children:[currNote?null:/*#__PURE__*/_jsx(\"h3\",{children:\"Table of Contents\"}),currNote&&notes.length>0?/*#__PURE__*/_jsx(NotePage,{handleClick:function handleClick(){return setEditForm(true);},note:notes[currNote-1],deleteNote:deleteNote}):notes.map(function(note,inx){return/*#__PURE__*/_jsxs(\"div\",{className:\"CharLink\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return changeNote(inx+1);},name:\"button\",children:note.title}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return deleteNote(note.id);},name:\"button\",children:\"X\"})]},note.id);})]}),addForm?/*#__PURE__*/_jsx(PopUpForm,{closeForm:function closeForm(){return setAddForm(false);},submit:addNote,inputs:[{title:\"Title\",name:\"title\"},{title:\"Text\",name:\"text\"}],initData:{title:\"\",text:\"\"},submitText:\"Add Note\"}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"CharacterBook_button\",onClick:function onClick(){return setAddForm(true);},name:\"button\",children:\"New note\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"CharacterBook_Back\",onClick:function onClick(){return changeNote(-1);}}),/*#__PURE__*/_jsx(\"div\",{className:\"CharacterBook_Next\",onClick:function onClick(){return changeNote(1);}})]});};export default NoteBook;","map":{"version":3,"names":["PopUpForm","useState","useEffect","noteBook","useAxios","NotePage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NoteBook","_ref","bookId","_useAxios","_useAxios2","_slicedToArray","reqNotes","notes","setNotes","_useState","_useState2","currNote","setCurrNote","_useState3","_useState4","addForm","setAddForm","_useState5","_useState6","editForm","setEditForm","concat","changeNote","num","newNote","length","addNote","data","deleteNote","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","noteId","res","updatedNotes","wrap","_callee$","_context","prev","next","sent","message","id","filter","note","stop","_x","apply","arguments","editNote","_ref3","_callee2","_callee2$","_context2","_x2","children","className","src","alt","closeForm","submit","inputs","title","name","initData","text","submitText","handleClick","map","inx","type","onClick"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/front/src/notes/NoteBook.js"],"sourcesContent":["import PopUpForm from \"../forms/PopUpForm\";\nimport { useState, useEffect } from \"react\";\n\nimport noteBook from \"../sprites/notes1.png\";\nimport useAxios from \"../hooks/useAxios\";\nimport \"../css/CharacterBook.css\";\nimport NotePage from \"./NotePage\";\n\n//shows all the notes for a book\n//lets you look at just one note\n//you can flip between notes\n//you can add edit or delete a note\nconst NoteBook = ({ bookId}) => {\n  const [reqNotes, notes, setNotes] = useAxios([], true);\n  const [currNote, setCurrNote] = useState(null);\n  const [addForm, setAddForm] = useState(false);\n  const [editForm, setEditForm] = useState(false);\n\n\n  //gets all the notes for a book\n  useEffect(() => {\n    reqNotes(\"get\", `/books/${bookId}/notes`, \"notes\");\n  }, []);\n\n  //changes the current note so you can flip between notes\n  const changeNote = (num) => {\n    let newNote = currNote ? currNote + num : num;\n    if (newNote < 0) newNote = null;\n    if (newNote > notes.length) newNote = 0;\n    setCurrNote(newNote);\n  };\n\n  //adds a note\n  const addNote = (data) => {\n    reqNotes(\"post\", `/books/${bookId}/notes`, \"note\", data);\n  };\n\n  //deletes a note\n  const deleteNote = async (noteId) => {\n    const res = await reqNotes(\"delete\", `/books/${bookId}/notes/${noteId}`);\n    if (res.message === \"Deleted!\") {\n      //if you are on that note page it changes it to the note before the current one\n      if (currNote) {\n        if (notes[currNote - 1].id === noteId) {\n          changeNote(-1);\n        }\n      }\n      let updatedNotes = notes.filter((note) => {\n        if (note.id != noteId) return note;\n      });\n      if (!updatedNotes[0]) updatedNotes = [];\n      setNotes(() => (updatedNotes));\n    }\n  };\n\n  //edits a note\n  const editNote = async (data) => {\n    const noteId = notes[currNote - 1].id;\n    reqNotes(\"patch\", `/notes/${noteId}`, \"note\", data);\n  };\n\n  return (\n    <>\n      <img className=\"CharacterBook_Image\" src={noteBook} alt=\"NoteBook\" />\n\n      {currNote && editForm ? (\n        <PopUpForm\n          closeForm={() => setEditForm(false)}\n          submit={editNote}\n          inputs={[\n            { title: \"Title\", name: \"title\" },\n            { title: \"Text\", name: \"text\" },\n          ]}\n          initData={{\n            title: notes[currNote - 1].title,\n            text: notes[currNote - 1].text,\n          }}\n          submitText=\"Edit Note\"\n        />\n      ) : null}\n\n      <div className=\"CharacterBook\">\n        {currNote ? null : <h3>Table of Contents</h3>}\n\n        {currNote && notes.length > 0 ? (\n          <NotePage\n            handleClick={() => setEditForm(true)}\n            note={notes[currNote - 1]}\n            deleteNote={deleteNote}\n          />\n        ) : (\n          notes.map((note, inx) => (\n            <div className=\"CharLink\" key={note.id}>\n              <button\n                type=\"button\"\n                onClick={() => changeNote(inx + 1)}\n                name=\"button\"\n              >\n                {note.title}\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => deleteNote(note.id)}\n                name=\"button\"\n              >\n                X\n              </button>\n            </div>\n          ))\n        )}\n      </div>\n\n      {addForm ? (\n        <PopUpForm\n          closeForm={() => setAddForm(false)}\n          submit={addNote}\n          inputs={[\n            { title: \"Title\", name: \"title\" },\n            { title: \"Text\", name: \"text\" },\n          ]}\n          initData={{\n            title: \"\",\n            text: \"\",\n          }}\n          submitText=\"Add Note\"\n        />\n      ) : (\n        <>\n          <button\n            type=\"button\"\n            className=\"CharacterBook_button\"\n            onClick={() => setAddForm(true)}\n            name=\"button\"\n          >\n            New note\n          </button>\n        </>\n      )}\n\n      <div className=\"CharacterBook_Back\" onClick={() => changeNote(-1)}></div>\n      <div className=\"CharacterBook_Next\" onClick={() => changeNote(1)}></div>\n    </>\n  );\n};\nexport default NoteBook;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}