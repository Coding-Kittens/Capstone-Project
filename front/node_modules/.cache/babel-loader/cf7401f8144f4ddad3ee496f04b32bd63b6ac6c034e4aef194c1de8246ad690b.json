{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import axios from\"axios\";///makes axios calls and sets state for the data it returns\n//returns a function to make requests,the state, setState\n///\n//takes:\n//initalVal the initial value of the state\n//isList, if the state should be a list or just on value\n////\n///////if its a list it will set the State with the data coming back in a list with the state that is already there\n///////if not it will replace the state with the data coming back\n///\nvar useAxios=function useAxios(initalVal){var isList=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var _useState=useState(initalVal),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];//makes a request and returns the response\n//takes:\n//type or request 'get','post','patch',or 'delete'\n//url\n//key of the data thats returned like data['books']\n//updateState, whether it should update the state or not\nvar request=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(type,url,key,data){var updateState,res,newState,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:updateState=_args.length>4&&_args[4]!==undefined?_args[4]:true;res='';_context.t0=type;_context.next=_context.t0==='get'?5:_context.t0==='post'?9:_context.t0==='patch'?13:_context.t0==='delete'?17:21;break;case 5:_context.next=7;return axios.get(url,{params:_objectSpread({},data)},{headers:{credentials:'include'}});case 7:res=_context.sent;return _context.abrupt(\"break\",22);case 9:_context.next=11;return axios.post(url,_objectSpread({},data),{headers:{credentials:'include'}});case 11:res=_context.sent;return _context.abrupt(\"break\",22);case 13:_context.next=15;return axios.patch(url,_objectSpread({},data),{headers:{credentials:'include'}});case 15:res=_context.sent;return _context.abrupt(\"break\",22);case 17:_context.next=19;return axios.delete(url,{headers:{credentials:'include'}});case 19:res=_context.sent;return _context.abrupt(\"break\",22);case 21:return _context.abrupt(\"break\",22);case 22:if(!res.data[key]){_context.next=30;break;}if(updateState){_context.next=25;break;}return _context.abrupt(\"return\",res.data[key]);case 25:if(isList){if(state.length>0){newState=state.map(function(s){return res.data[key].id===s.id?res.data[key]:s;});if(type=='post'){newState=[].concat(_toConsumableArray(state),[res.data[key]]);}}else{if(Array.isArray(res.data[key])){newState=_toConsumableArray(res.data[key]);}else{newState=[res.data[key]];}}}else{newState=res.data[key];}setState(newState);return _context.abrupt(\"return\",{data:res.data[key]});case 30:if(!res.data.message){_context.next=33;break;}if(res.status!=201&&res.status!=200)setState(initalVal);return _context.abrupt(\"return\",res.data);case 33:if(!(res.status===404)){_context.next=35;break;}return _context.abrupt(\"return\",{message:\"No \".concat(key,\" found!\")});case 35:case\"end\":return _context.stop();}}},_callee);}));return function request(_x,_x2,_x3,_x4){return _ref.apply(this,arguments);};}();return[request,state,setState];};export default useAxios;","map":{"version":3,"names":["useState","axios","useAxios","initalVal","isList","state","setState","request","type","url","key","data","updateState","res","get","params","headers","credentials","post","patch","delete","length","newState","map","s","id","Array","isArray","message","status"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/hooks/useAxios.js"],"sourcesContent":["\nimport { useState } from \"react\";\nimport axios from \"axios\";\n\n\n///makes axios calls and sets state for the data it returns\n//returns a function to make requests,the state, setState\n///\n//takes:\n//initalVal the initial value of the state\n//isList, if the state should be a list or just on value\n////\n///////if its a list it will set the State with the data coming back in a list with the state that is already there\n///////if not it will replace the state with the data coming back\n///\nconst useAxios=(initalVal,isList=false)=>{\n  const [state,setState] = useState(initalVal)\n\n\n//makes a request and returns the response\n//takes:\n//type or request 'get','post','patch',or 'delete'\n//url\n//key of the data thats returned like data['books']\n//updateState, whether it should update the state or not\n  const request=async(type,url,key,data,updateState=true)=>{\n    let res='';\n\n    switch (type){\n      case 'get':\n        res = await axios.get(url,{params:{...data}}, {headers:{credentials: 'include'}});\n        break;\n        case 'post':\n       res = await axios.post(url,{...data},{headers:{credentials: 'include'}});\n          break;\n          case 'patch':\n             res = await axios.patch(url,{...data},{headers:{credentials: 'include'}});\n            break;\n            case 'delete':\n             res = await axios.delete(url,{headers:{credentials: 'include'}});\n              break;\n      default:\n      break;\n    }\n\n\n    if(res.data[key]){\n      if(!updateState) return res.data[key];\n\n      let newState;\n      if(isList){\n        if(state.length>0){\n            newState = state.map(s => res.data[key].id === s.id? res.data[key]:s)\n\n            if(type=='post'){\n              newState =[...state,res.data[key]];\n            }\n        }\n        else {\n          if(Array.isArray(res.data[key])){\n            newState =[...res.data[key]];\n          }else{\n            newState =[res.data[key]];\n          }\n        }\n\n      }else{\n        newState =res.data[key];\n      }\n\n    setState(newState);\n    return {data: res.data[key]}\n\n    }\n    else if(res.data.message){\n      if(res.status != 201 && res.status != 200)setState(initalVal);\n      return res.data;\n    }\n    if(res.status === 404){\n      return {message:`No ${key} found!`};\n    }\n  }\n\nreturn [request,state,setState];\n}\n\n\nexport default useAxios;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}