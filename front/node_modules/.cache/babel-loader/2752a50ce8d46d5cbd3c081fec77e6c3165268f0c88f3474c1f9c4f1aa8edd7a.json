{"ast":null,"code":"var _jsxFileName = \"/Users/rosepowell/Desktop/Book_Writing/book_writing/src/books/BookMark.js\",\n  _s = $RefreshSig$();\nimport PopUpForm from \"../forms/PopUpForm\";\nimport { useState, useEffect } from \"react\";\nimport useToggle from \"../hooks/useToggle\";\nimport bookmark from \"../sprites/bookMark.png\";\nimport axios from \"axios\";\nimport \"../css/CharacterBook.css\";\nimport NotePage from \"../notes/NotePage\";\nimport Tab from \"./Tab\";\n\n///shows all the bookmarks for a book and lets you add a new one\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BookMark = _ref => {\n  _s();\n  let {\n    bookId,\n    username,\n    currPageId,\n    changePage\n  } = _ref;\n  const [notes, setNotes] = useState([]);\n  const [currNote, setCurrNote] = useState(1);\n  const [addForm, setAddForm] = useState(false);\n  const [addExistingForm, setAddExistingForm] = useState(false);\n  useEffect(() => {\n    const getNotes = async () => {\n      const res = await axios.get(`/bookmarks/${bookId}`);\n      console.log(\"get book marks\", res);\n      if (res.data.bookmarks.length > 0) {\n        setNotes(n => n = res.data.bookmarks);\n      }\n    };\n    getNotes();\n  }, []);\n\n  // const changeNote = (num) => {\n  //   let newNote = num;\n  //   if (newNote < 0) newNote = 0;\n  //   if (newNote >= notes.length) newNote = notes.length - 1;\n  //   setCurrNote(newNote);\n  // };\n\n  const addNote = async (data, pageId) => {\n    console.log('add data', data);\n    const res = await axios.post(`/bookmarks/${bookId}/${pageId}`, data);\n    console.log(\"add book mark\", res);\n    if (res.data.bookmark) {\n      setNotes(n => n = [...notes, res.data.bookmark]);\n    }\n  };\n  const deleteNote = async pageId => {\n    const res = await axios.delete(`/bookmarks/${bookId}/${pageId}`);\n    console.log(res);\n    if (res.data.message === \"Deleted!\") {\n      let updatedNotes = notes.map(note => {\n        if (note.id != pageId) return note;\n      });\n      if (!updatedNotes[0]) updatedNotes = [];\n      setNotes(n => n = updatedNotes);\n    }\n  };\n  const editNote = async (data, pageId) => {\n    const res = await axios.patch(`/bookmarks/${bookId}/${pageId}`, {\n      ...data,\n      page_id: currPageId,\n      book_id: bookId\n    });\n    if (res.data.bookmark) {\n      setNotes(n => n = notes.map(note => note.id != pageId ? note : res.data.bookmark));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"CharacterBook_Image\",\n      src: bookmark,\n      alt: \"bookmark\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CharacterBook\",\n      children: notes.length > 0 && currPageId ? notes.map(note => /*#__PURE__*/_jsxDEV(Tab, {\n        info: note,\n        page_id: currPageId,\n        handleClick: () => changePage(note.page_num),\n        editTab: editNote,\n        deleteTab: deleteNote\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 15\n      }, this)) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), addForm ? /*#__PURE__*/_jsxDEV(PopUpForm, {\n      closeForm: () => setAddForm(false),\n      submit: data => addNote(data, currPageId),\n      inputs: [{\n        name: 'text',\n        title: 'Note'\n      }],\n      initData: {\n        text: \"\"\n      },\n      submitText: \"Add\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"CharacterBook_button\",\n        onClick: () => setAddForm(true),\n        name: \"button\",\n        children: \"New Bookmark\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this)\n    }, void 0, false)]\n  }, void 0, true);\n};\n_s(BookMark, \"VMKEYY3Vv//DZLdKjGWBQ4+vQtM=\");\n_c = BookMark;\nexport default BookMark;\nvar _c;\n$RefreshReg$(_c, \"BookMark\");","map":{"version":3,"names":["PopUpForm","useState","useEffect","useToggle","bookmark","axios","NotePage","Tab","BookMark","bookId","username","currPageId","changePage","notes","setNotes","currNote","setCurrNote","addForm","setAddForm","addExistingForm","setAddExistingForm","getNotes","res","get","console","log","data","bookmarks","length","n","addNote","pageId","post","deleteNote","delete","message","updatedNotes","map","note","id","editNote","patch","page_id","book_id","page_num","name","title","text"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/books/BookMark.js"],"sourcesContent":["import PopUpForm from \"../forms/PopUpForm\";\nimport { useState, useEffect } from \"react\";\nimport useToggle from \"../hooks/useToggle\";\nimport bookmark from \"../sprites/bookMark.png\";\nimport axios from \"axios\";\nimport \"../css/CharacterBook.css\";\nimport NotePage from \"../notes/NotePage\";\nimport Tab from \"./Tab\";\n\n///shows all the bookmarks for a book and lets you add a new one\nconst BookMark = ({ bookId, username, currPageId, changePage }) => {\n  const [notes, setNotes] = useState([]);\n  const [currNote, setCurrNote] = useState(1);\n  const [addForm, setAddForm] = useState(false);\n\n  const [addExistingForm, setAddExistingForm] = useState(false);\n\n  useEffect(() => {\n    const getNotes = async () => {\n      const res = await axios.get(`/bookmarks/${bookId}`);\n      console.log(\"get book marks\", res);\n      if (res.data.bookmarks.length > 0) {\n        setNotes((n) => (n = res.data.bookmarks));\n      }\n    };\n    getNotes();\n  }, []);\n\n  // const changeNote = (num) => {\n  //   let newNote = num;\n  //   if (newNote < 0) newNote = 0;\n  //   if (newNote >= notes.length) newNote = notes.length - 1;\n  //   setCurrNote(newNote);\n  // };\n\n  const addNote = async (data, pageId) => {\n    console.log('add data',data);\n    const res = await axios.post(`/bookmarks/${bookId}/${pageId}`, data);\n    console.log(\"add book mark\", res);\n    if (res.data.bookmark) {\n      setNotes((n) => (n = [...notes, res.data.bookmark]));\n    }\n  };\n\n  const deleteNote = async (pageId) => {\n    const res = await axios.delete(`/bookmarks/${bookId}/${pageId}`);\n    console.log(res);\n    if (res.data.message === \"Deleted!\") {\n      let updatedNotes = notes.map((note) => {\n        if (note.id != pageId) return note;\n      });\n      if (!updatedNotes[0]) updatedNotes = [];\n      setNotes((n) => (n = updatedNotes));\n    }\n  };\n\n  const editNote = async (data, pageId) => {\n    const res = await axios.patch(`/bookmarks/${bookId}/${pageId}`, {\n      ...data,\n      page_id: currPageId,\n      book_id: bookId,\n    });\n    if (res.data.bookmark) {\n      setNotes(\n        (n) =>\n          (n = notes.map((note) =>\n            note.id != pageId ? note : res.data.bookmark\n          ))\n      );\n    }\n  };\n\n  return (\n    <>\n      <img className=\"CharacterBook_Image\" src={bookmark} alt=\"bookmark\" />\n\n      <div className=\"CharacterBook\">\n        {notes.length > 0 && currPageId\n          ? notes.map((note) => (\n              <Tab\n                info={note}\n                page_id={currPageId}\n                handleClick={() => changePage(note.page_num)}\n                editTab={editNote}\n                deleteTab={deleteNote}\n              />\n            ))\n          : null}\n      </div>\n\n      {addForm ? (\n        <PopUpForm\n          closeForm={() => setAddForm(false)}\n          submit={(data) => addNote(data, currPageId)}\n          inputs={[{name:'text',title:'Note'}]}\n          initData={{\n            text: \"\",\n          }}\n          submitText=\"Add\"\n        />\n      ) : (\n        <>\n          <button\n            type=\"button\"\n            className=\"CharacterBook_button\"\n            onClick={() => setAddForm(true)}\n            name=\"button\"\n          >\n            New Bookmark\n          </button>\n        </>\n      )}\n    </>\n  );\n};\nexport default BookMark;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}