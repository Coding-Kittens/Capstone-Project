{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import axios from\"axios\";///makes axios calls and sets state for the data it returns\n//returns a function to make requests,the state, setState\n///\n//takes:\n//initalVal the initial value of the state\n//isList, if the state should be a list or just on value\n////\n///////if its a list it will set the State with the data coming back in a list with the state that is already there\n///////if not it will replace the state with the data coming back\n///\nvar useAxios=function useAxios(initalVal){var isList=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var _useState=useState(initalVal),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var baseURL=process.env.REACT_APP_BASE_URL;//makes a request and returns the response\n//takes:\n//type or request 'get','post','patch',or 'delete'\n//url\n//key of the data thats returned like data['books']\n//updateState, whether it should update the state or not\nvar request=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(type,url,key,data){var updateState,res,newState,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:updateState=_args.length>4&&_args[4]!==undefined?_args[4]:true;res='';_context.t0=type;_context.next=_context.t0==='get'?5:_context.t0==='post'?9:_context.t0==='patch'?13:_context.t0==='delete'?17:21;break;case 5:_context.next=7;return axios.get(\"\".concat(baseURL,\"/\").concat(url),{params:_objectSpread({},data)},{headers:{credentials:'include'}});case 7:res=_context.sent;return _context.abrupt(\"break\",22);case 9:_context.next=11;return axios.post(\"\".concat(baseURL,\"/\").concat(url),_objectSpread({},data),{headers:{credentials:'include'}});case 11:res=_context.sent;return _context.abrupt(\"break\",22);case 13:_context.next=15;return axios.patch(\"\".concat(baseURL,\"/\").concat(url),_objectSpread({},data),{headers:{credentials:'include'}});case 15:res=_context.sent;return _context.abrupt(\"break\",22);case 17:_context.next=19;return axios.delete(\"\".concat(baseURL,\"/\").concat(url),{headers:{credentials:'include'}});case 19:res=_context.sent;return _context.abrupt(\"break\",22);case 21:return _context.abrupt(\"break\",22);case 22:if(!res.data[key]){_context.next=30;break;}if(updateState){_context.next=25;break;}return _context.abrupt(\"return\",res.data[key]);case 25:if(isList){if(state.length>0){newState=state.map(function(s){return res.data[key].id===s.id?res.data[key]:s;});if(type=='post'){newState=[].concat(_toConsumableArray(state),[res.data[key]]);}}else{if(Array.isArray(res.data[key])){newState=_toConsumableArray(res.data[key]);}else{newState=[res.data[key]];}}}else{newState=res.data[key];}setState(newState);return _context.abrupt(\"return\",{data:res.data[key]});case 30:if(!res.data.message){_context.next=33;break;}if(res.status!=201&&res.status!=200)setState(initalVal);return _context.abrupt(\"return\",res.data);case 33:if(!(res.status===404)){_context.next=35;break;}return _context.abrupt(\"return\",{message:\"No \".concat(key,\" found!\")});case 35:case\"end\":return _context.stop();}},_callee);}));return function request(_x,_x2,_x3,_x4){return _ref.apply(this,arguments);};}();return[request,state,setState];};export default useAxios;","map":{"version":3,"names":["useState","axios","useAxios","initalVal","isList","arguments","length","undefined","_useState","_useState2","_slicedToArray","state","setState","baseURL","process","env","REACT_APP_BASE_URL","request","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","type","url","key","data","updateState","res","newState","_args","wrap","_callee$","_context","prev","next","t0","get","concat","params","_objectSpread","headers","credentials","sent","abrupt","post","patch","delete","map","s","id","_toConsumableArray","Array","isArray","message","status","stop","_x","_x2","_x3","_x4","apply"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/front/src/hooks/useAxios.js"],"sourcesContent":["\nimport { useState } from \"react\";\nimport axios from \"axios\";\n\n\n///makes axios calls and sets state for the data it returns\n//returns a function to make requests,the state, setState\n///\n//takes:\n//initalVal the initial value of the state\n//isList, if the state should be a list or just on value\n////\n///////if its a list it will set the State with the data coming back in a list with the state that is already there\n///////if not it will replace the state with the data coming back\n///\nconst useAxios=(initalVal,isList=false)=>{\n  const [state,setState] = useState(initalVal)\nconst baseURL = process.env.REACT_APP_BASE_URL\n\n//makes a request and returns the response\n//takes:\n//type or request 'get','post','patch',or 'delete'\n//url\n//key of the data thats returned like data['books']\n//updateState, whether it should update the state or not\n  const request=async(type,url,key,data,updateState=true)=>{\n    let res='';\n\n    switch (type){\n      case 'get':\n        res = await axios.get(`${baseURL}/${url}`,{params:{...data}}, {headers:{credentials: 'include'}});\n        break;\n        case 'post':\n       res = await axios.post(`${baseURL}/${url}`,{...data},{headers:{credentials: 'include'}});\n          break;\n          case 'patch':\n             res = await axios.patch(`${baseURL}/${url}`,{...data},{headers:{credentials: 'include'}});\n            break;\n            case 'delete':\n             res = await axios.delete(`${baseURL}/${url}`,{headers:{credentials: 'include'}});\n              break;\n      default:\n      break;\n    }\n\n\n    if(res.data[key]){\n      if(!updateState) return res.data[key];\n\n      let newState;\n      if(isList){\n        if(state.length>0){\n            newState = state.map(s => res.data[key].id === s.id? res.data[key]:s)\n\n            if(type=='post'){\n              newState =[...state,res.data[key]];\n            }\n        }\n        else {\n          if(Array.isArray(res.data[key])){\n            newState =[...res.data[key]];\n          }else{\n            newState =[res.data[key]];\n          }\n        }\n\n      }else{\n        newState =res.data[key];\n      }\n\n    setState(newState);\n    return {data: res.data[key]}\n\n    }\n    else if(res.data.message){\n      if(res.status != 201 && res.status != 200)setState(initalVal);\n      return res.data;\n    }\n    if(res.status === 404){\n      return {message:`No ${key} found!`};\n    }\n  }\n\nreturn [request,state,setState];\n}\n\n\nexport default useAxios;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}