{"ast":null,"code":"import _toConsumableArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import cover from'./sprites/OpenBook1.png';import page from'./sprites/OpenBookPages.png';import{useState,useEffect}from'react';import InputPage from'./InputPage';import Page from'./Page';import axios from'axios';import'./css/Book.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Book=function Book(_ref){var areReading=_ref.areReading,bookId=_ref.bookId;var _useState=useState(),_useState2=_slicedToArray(_useState,2),pages=_useState2[0],setPages=_useState2[1];var _useState3=useState([1,2]),_useState4=_slicedToArray(_useState3,2),pageNum=_useState4[0],setPageNum=_useState4[1];//maybe later keep track of what page they were on last and add it to the book in the db\nuseEffect(function(){var getPages=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/books/\".concat(bookId,\"/pages\"));case 2:res=_context.sent;if(res.data.pages){setPages(function(n){return n=res.data.pages;});}else if(!areReading){addPage();}case 4:case\"end\":return _context.stop();}}},_callee);}));return function getPages(){return _ref2.apply(this,arguments);};}();getPages();},[]);var updatePage=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"/books/\".concat(bookId,\"/pages/\").concat(bookId),{page_num:pageNum[1]+1,num_of_pages:2});case 2:res=_context2.sent;if(res.data.pages){setPages(function(n){return n=[].concat(_toConsumableArray(pages),_toConsumableArray(res.data.pages));});}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function updatePage(){return _ref3.apply(this,arguments);};}();var nextPage=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(pageNum[1]+2>pages.length)){_context3.next=6;break;}_context3.next=3;return addPage();case 3:if(!areReading)setPageNum(function(n){return n=[pageNum[0]+2,pageNum[1]+2];});_context3.next=7;break;case 6:setPageNum(function(n){return n=[pageNum[0]+2,pageNum[1]+2];});case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function nextPage(){return _ref4.apply(this,arguments);};}();var prevPage=function prevPage(){if(pageNum[0]-2>0){setPageNum(function(n){return n=[pageNum[0]-2,pageNum[1]-2];});}};var addPage=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(text){var res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.post(\"/books/\".concat(pages[pageNum[0]].id,\"/pages\"),{text:text});case 2:res=_context4.sent;if(res.data.pages){setPages(function(n){return n=[].concat(_toConsumableArray(pages),_toConsumableArray(res.data.pages));});}case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function addPage(_x){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"Book\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"Book_cover\",src:cover,alt:\"cover\"}),/*#__PURE__*/_jsx(\"img\",{className:\"Book_pages\",src:page,alt:\"pages\"}),pages?areReading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Page,{pageNum:pageNum[0],changePage:prevPage,text:pages[pageNum[0]-1].text}),\" \",/*#__PURE__*/_jsx(Page,{pageNum:pageNum[1],changePage:nextPage,text:pages[pageNum[1]-1].text})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(InputPage,{pageNum:pageNum[0],changePage:prevPage,text:pages[pageNum[0]-1].text}),/*#__PURE__*/_jsx(InputPage,{pageNum:pageNum[1],changePage:nextPage,text:pages[pageNum[1]-1].text})]}):null]});};export default Book;","map":{"version":3,"names":["cover","page","useState","useEffect","InputPage","Page","axios","Book","areReading","bookId","pages","setPages","pageNum","setPageNum","getPages","get","res","data","n","addPage","updatePage","post","page_num","num_of_pages","nextPage","length","prevPage","text","id"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/Book.js"],"sourcesContent":["import cover from './sprites/OpenBook1.png'\nimport page from './sprites/OpenBookPages.png'\nimport {useState,useEffect} from 'react';\nimport InputPage from './InputPage'\nimport Page from './Page'\nimport axios from 'axios';\nimport './css/Book.css';\nconst Book =({areReading,bookId})=>{\n\nconst [pages,setPages]=useState();\nconst [pageNum,setPageNum]=useState([1,2]);//maybe later keep track of what page they were on last and add it to the book in the db\n\n\nuseEffect(()=>{\nconst getPages = async()=>{\n  const res = await axios.get(`/books/${bookId}/pages`);\n  if(res.data.pages){\n    setPages((n)=> n= res.data.pages);\n  }\n  else if(!areReading){\n    addPage();\n  }\n\n}\ngetPages();\n},[])\n\nconst updatePage=async()=>{\n  let res = await axios.post(`/books/${bookId}/pages/${bookId}`,{page_num: pageNum[1]+1,num_of_pages:2});\n  if(res.data.pages){\n   setPages((n)=> n= [...pages,...res.data.pages]);\n  }\n}\n\n\nconst nextPage = async()=>{\n  if(pageNum[1]+2 > pages.length){\n    await addPage();\n    if(!areReading) setPageNum((n)=> n=[pageNum[0]+2,pageNum[1]+2]);\n  }else{\n    setPageNum((n)=> n=[pageNum[0]+2,pageNum[1]+2]);\n  }\n}\n\nconst prevPage = ()=>{\n  if(pageNum[0]-2 >0){\n    setPageNum((n)=> n=[pageNum[0]-2,pageNum[1]-2]);\n  }\n}\n\nconst addPage =async(text)=>{\n let res = await axios.post(`/books/${pages[pageNum[0]].id}/pages`,{text:text});\nif(res.data.pages){\n  setPages((n)=> n= [...pages,...res.data.pages]);\n}\n}\n\nreturn <div className ='Book'>\n\n<img className ='Book_cover' src={cover} alt=\"cover\"/>\n<img className ='Book_pages' src={page} alt=\"pages\"/>\n\n{\n  pages?\n    areReading?\n    <>\n    <Page pageNum={pageNum[0]} changePage={prevPage} text={pages[pageNum[0]-1].text}/> <Page pageNum={pageNum[1]} changePage={nextPage} text={pages[pageNum[1]-1].text}/>\n    </>\n    : <>\n    <InputPage pageNum={pageNum[0]} changePage={prevPage} text={pages[pageNum[0]-1].text}/><InputPage pageNum={pageNum[1]} changePage={nextPage} text={pages[pageNum[1]-1].text}/>\n    </>\n  : null\n}\n\n\n</div>\n}\nexport default Book;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}