{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useParams,useNavigate}from\"react-router-dom\";import{useState,useEffect,useContext}from\"react\";import Card from\"../pieces/Card\";import useAxios from\"../hooks/useAxios\";import{UserContext}from\"../context/context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserLibraries=function UserLibraries(){var currentUser=useContext(UserContext);var navigate=useNavigate();var _useParams=useParams(),username=_useParams.username;var _useAxios=useAxios(null),_useAxios2=_slicedToArray(_useAxios,3),reqLibraries=_useAxios2[0],libraries=_useAxios2[1],setLibraries=_useAxios2[2];useEffect(function(){reqLibraries(\"get\",\"/users/\".concat(username,\"/libraries\"),\"libraries\");},[]);var deleteLibrary=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return reqLibraries('delete',\"/libraries/\".concat(id));case 2:res=_context.sent;if(res.message==='Deleted!')setLibraries(libraries.filter(function(library){return library.id!=id;}));case 4:case\"end\":return _context.stop();}}},_callee);}));return function deleteLibrary(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"ListPage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\".concat(username,\"'s Libraries\")}),libraries?libraries.map(function(library){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card,{title:library.name,texts:[library.description,\"\".concat(library.is_public?\"public\":\"private\")],handleClick:function handleClick(){return navigate(\"/library/\".concat(library.id));}}),currentUser.username===username?/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return deleteLibrary(library.id);},name:\"button\",children:\"X\"}):null]},library.id);}):null,currentUser.username===username?/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return navigate('/new/library');},name:\"button\",children:\"New Library\"}):null]});};export default UserLibraries;","map":{"version":3,"names":["useParams","useNavigate","useState","useEffect","useContext","Card","useAxios","UserContext","UserLibraries","currentUser","navigate","username","reqLibraries","libraries","setLibraries","deleteLibrary","id","res","message","filter","library","map","name","description","is_public"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/pages/UserLibraries.js"],"sourcesContent":["import { useParams, useNavigate } from \"react-router-dom\";\nimport { useState, useEffect,useContext } from \"react\";\nimport Card from \"../pieces/Card\";\nimport useAxios from \"../hooks/useAxios\";\nimport { UserContext } from \"../context/context\";\n\nconst UserLibraries = () => {\n    const currentUser = useContext(UserContext);\n  const navigate = useNavigate();\n  const { username } = useParams();\n  const [reqLibraries, libraries, setLibraries] = useAxios(null);\n\n  useEffect(() => {\n    reqLibraries(\"get\", `/users/${username}/libraries`, \"libraries\");\n  }, []);\n\n\nconst deleteLibrary=async(id)=>{\nconst res = await reqLibraries('delete',`/libraries/${id}`);\nif(res.message==='Deleted!') setLibraries(libraries.filter(library => library.id !=id));\n}\n\n  return (\n    <div className=\"ListPage\">\n      <h1>{`${username}'s Libraries`}</h1>\n      {libraries\n        ? libraries.map((library) => (\n          <div key={library.id}>\n            <Card\n              title={library.name}\n              texts={[\n                library.description,\n                `${library.is_public ? \"public\" : \"private\"}`,\n              ]}\n              handleClick={() => navigate(`/library/${library.id}`)}\n            />\n            {currentUser.username === username?\n                <button type=\"button\" onClick={()=>deleteLibrary(library.id)} name=\"button\">X</button>\n                :\n                null\n            }\n\n            </div>\n          ))\n        : null}\n        {currentUser.username === username?\n            <button type=\"button\" onClick={()=>navigate('/new/library')} name=\"button\">New Library</button>:\n            null\n        }\n\n    </div>\n  );\n};\nexport default UserLibraries;\n"],"mappings":"2aAAA,OAASA,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,QAAQ,CAAEC,SAAS,CAACC,UAAU,KAAQ,OAAO,CACtD,MAAOC,KAAI,KAAM,gBAAgB,CACjC,MAAOC,SAAQ,KAAM,mBAAmB,CACxC,OAASC,WAAW,KAAQ,oBAAoB,CAAC,wFAEjD,GAAMC,cAAa,CAAG,QAAhBA,cAAa,EAAS,CACxB,GAAMC,YAAW,CAAGL,UAAU,CAACG,WAAW,CAAC,CAC7C,GAAMG,SAAQ,CAAGT,WAAW,EAAE,CAC9B,eAAqBD,SAAS,EAAE,CAAxBW,QAAQ,YAARA,QAAQ,CAChB,cAAgDL,QAAQ,CAAC,IAAI,CAAC,wCAAvDM,YAAY,eAAEC,SAAS,eAAEC,YAAY,eAE5CX,SAAS,CAAC,UAAM,CACdS,YAAY,CAAC,KAAK,kBAAYD,QAAQ,eAAc,WAAW,CAAC,CAClE,CAAC,CAAE,EAAE,CAAC,CAGR,GAAMI,cAAa,4FAAC,iBAAMC,EAAE,kJACVJ,aAAY,CAAC,QAAQ,sBAAeI,EAAE,EAAG,QAArDC,GAAG,eACT,GAAGA,GAAG,CAACC,OAAO,GAAG,UAAU,CAAEJ,YAAY,CAACD,SAAS,CAACM,MAAM,CAAC,SAAAC,OAAO,QAAIA,QAAO,CAACJ,EAAE,EAAGA,EAAE,GAAC,CAAC,CAAC,sDACvF,kBAHKD,cAAa,4CAGlB,CAEC,mBACE,aAAK,SAAS,CAAC,UAAU,wBACvB,8BAAQJ,QAAQ,kBAAoB,CACnCE,SAAS,CACNA,SAAS,CAACQ,GAAG,CAAC,SAACD,OAAO,qBACtB,oCACE,KAAC,IAAI,EACH,KAAK,CAAEA,OAAO,CAACE,IAAK,CACpB,KAAK,CAAE,CACLF,OAAO,CAACG,WAAW,WAChBH,OAAO,CAACI,SAAS,CAAG,QAAQ,CAAG,SAAS,EAC3C,CACF,WAAW,CAAE,6BAAMd,SAAQ,oBAAaU,OAAO,CAACJ,EAAE,EAAG,EAAC,EACtD,CACDP,WAAW,CAACE,QAAQ,GAAKA,QAAQ,cAC9B,eAAQ,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAE,yBAAII,cAAa,CAACK,OAAO,CAACJ,EAAE,CAAC,EAAC,CAAC,IAAI,CAAC,QAAQ,eAAW,CAEtF,IAAI,GAZAI,OAAO,CAACJ,EAAE,CAeZ,EACP,CAAC,CACF,IAAI,CACLP,WAAW,CAACE,QAAQ,GAAKA,QAAQ,cAC9B,eAAQ,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAE,yBAAID,SAAQ,CAAC,cAAc,CAAC,EAAC,CAAC,IAAI,CAAC,QAAQ,yBAAqB,CAC/F,IAAI,GAGN,CAEV,CAAC,CACD,cAAeF,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}