{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rosepowell/Desktop/desktop stuff/myprojects/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/desktop stuff/myprojects/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/desktop stuff/myprojects/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Link,useParams}from\"react-router-dom\";import{useEffect,useContext}from\"react\";import settingImg from\"../sprites/settings.png\";import bookImg from\"../sprites/book4.png\";import bookShelfImg from\"../sprites/Librarybutton1.png\";import tempImg from\"../sprites/painting.png\";import newBook from\"../sprites/NewBook.png\";import ink from\"../sprites/ink2.png\";import useAxios from\"../hooks/useAxios\";import useToggle from\"../hooks/useToggle\";import UserForm from\"../forms/UserForm\";import\"../css/UserPage.css\";import{UserContext}from\"../context/context\";//shows a users page\n//if it is the current users page show new book, new library, and Settings\n//if its not the current users page show their books and libraries\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UserPage=function UserPage(){var currentUser=useContext(UserContext);var _useParams=useParams(),username=_useParams.username;var _useAxios=useAxios(null),_useAxios2=_slicedToArray(_useAxios,2),reqUser=_useAxios2[0],user=_useAxios2[1];var _useToggle=useToggle(false),_useToggle2=_slicedToArray(_useToggle,3),editForm=_useToggle2[0],toggleEdit=_useToggle2[1],setEditForm=_useToggle2[2];//gets the user\nuseEffect(function(){var getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:reqUser(\"get\",\"/users/\".concat(username),\"user\");case 1:case\"end\":return _context.stop();}},_callee);}));return function getUser(){return _ref.apply(this,arguments);};}();getUser();},[]);//edits a user\nvar editUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return reqUser(\"patch\",\"/users/\".concat(username),\"user\",data);case 2:res=_context2.sent;console.log(res);setEditForm(false);case 5:case\"end\":return _context2.stop();}},_callee2);}));return function editUser(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:user&&currentUser?/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage\",children:[/*#__PURE__*/_jsx(\"img\",{id:\"BookImg\",src:bookImg,alt:\"book\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_1\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Autobiography\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Username: \",username]}),editForm?/*#__PURE__*/_jsx(UserForm,{submit:editUser,user:user}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Full Name: \",user.name]}),user.bio?/*#__PURE__*/_jsx(\"p\",{children:user.bio}):/*#__PURE__*/_jsx(\"p\",{children:currentUser.username===username?\"No bio! Click on the ink and quil, to edit your Autobiography.\":null})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_2\",children:[/*#__PURE__*/_jsx(\"img\",{id:\"profileImg\",src:tempImg,alt:\"profile pic\"}),currentUser.username===username?/*#__PURE__*/_jsx(\"img\",{onClick:toggleEdit,id:\"ink\",src:ink,alt:\"ink\"}):null]}),currentUser.username===username?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_Library\",children:[/*#__PURE__*/_jsx(\"img\",{src:bookShelfImg,alt:\"bookshelf\"}),/*#__PURE__*/_jsx(Link,{end:true,to:\"/new/library\",children:\"New Library\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_Book\",children:[/*#__PURE__*/_jsx(\"img\",{src:newBook,alt:\"new Book\"}),/*#__PURE__*/_jsx(Link,{end:true,to:\"/new/book\",children:\"New Book\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_Settings\",children:[/*#__PURE__*/_jsx(\"img\",{src:settingImg,alt:\"paper\"}),/*#__PURE__*/_jsx(Link,{end:true,to:\"/settings\",children:\"Settings\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_Library\",children:[/*#__PURE__*/_jsx(\"img\",{src:bookShelfImg,alt:\"bookshelf\"}),/*#__PURE__*/_jsx(Link,{end:true,to:\"/user/\".concat(username,\"/libraries\"),children:\"\".concat(username,\"'s Libraries\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_Book\",children:[/*#__PURE__*/_jsx(\"img\",{src:newBook,alt:\"new Book\"}),/*#__PURE__*/_jsx(Link,{end:true,to:\"/user/\".concat(username,\"/books\"),children:\"\".concat(username,\"'s Books\")})]})]})]}):/*#__PURE__*/_jsx(\"h1\",{children:\"loading...\"})});};export default UserPage;","map":{"version":3,"names":["Link","useParams","useEffect","useContext","settingImg","bookImg","bookShelfImg","tempImg","newBook","ink","useAxios","useToggle","UserForm","UserContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserPage","currentUser","_useParams","username","_useAxios","_useAxios2","_slicedToArray","reqUser","user","_useToggle","_useToggle2","editForm","toggleEdit","setEditForm","getUser","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","concat","stop","apply","arguments","editUser","_ref2","_callee2","data","res","_callee2$","_context2","sent","console","log","_x","children","className","id","src","alt","submit","name","bio","onClick","end","to"],"sources":["/Users/rosepowell/Desktop/desktop stuff/myprojects/Book_Writing/book_writing/front/src/pages/UserPage.js"],"sourcesContent":["import { Link, useParams } from \"react-router-dom\";\nimport { useEffect, useContext } from \"react\";\nimport settingImg from \"../sprites/settings.png\";\nimport bookImg from \"../sprites/book4.png\";\nimport bookShelfImg from \"../sprites/Librarybutton1.png\";\nimport tempImg from \"../sprites/painting.png\";\nimport newBook from \"../sprites/NewBook.png\";\nimport ink from \"../sprites/ink2.png\";\nimport useAxios from \"../hooks/useAxios\";\nimport useToggle from \"../hooks/useToggle\";\nimport UserForm from \"../forms/UserForm\";\nimport \"../css/UserPage.css\";\nimport { UserContext } from \"../context/context\";\n\n//shows a users page\n//if it is the current users page show new book, new library, and Settings\n//if its not the current users page show their books and libraries\nconst UserPage = () => {\n  const currentUser = useContext(UserContext);\n  const { username } = useParams();\n\n  const [reqUser, user] = useAxios(null);\n  const [editForm, toggleEdit, setEditForm] = useToggle(false);\n\n  //gets the user\n  useEffect(() => {\n    const getUser = async () => {\n      reqUser(\"get\", `/users/${username}`, \"user\");\n    };\n    getUser();\n  }, []);\n\n  //edits a user\n  const editUser = async (data) => {\n    const res = await reqUser(\"patch\", `/users/${username}`, \"user\", data);\n    console.log(res);\n    setEditForm(false);\n  };\n\n  return (\n    <>\n      {user && currentUser ? (\n        <div className=\"UserPage\">\n          <img id=\"BookImg\" src={bookImg} alt=\"book\" />\n\n          <div className=\"UserPage_1\">\n            <h1>Autobiography</h1>\n            <h2>Username: {username}</h2>\n            {editForm ? (\n              <UserForm\n              submit={editUser}\n              user ={user}\n              />\n            ) : (\n              <>\n                <h2>Full Name: {user.name}</h2>\n                {user.bio ? (\n                  <p>{user.bio}</p>\n                ) : (\n                  <p>\n                    {currentUser.username === username\n                      ? \"No bio! Click on the ink and quil, to edit your Autobiography.\"\n                      : null}\n                  </p>\n                )}\n              </>\n            )}\n          </div>\n\n          <div className=\"UserPage_2\">\n            <img id=\"profileImg\" src={tempImg} alt=\"profile pic\" />\n            {currentUser.username === username ? (\n              <img onClick={toggleEdit} id=\"ink\" src={ink} alt=\"ink\" />\n            ) : null}\n          </div>\n\n          {currentUser.username === username ? (\n            <>\n              <div className=\"UserPage_Library\">\n                <img src={bookShelfImg} alt=\"bookshelf\" />\n                <Link end to={\"/new/library\"}>\n                  New Library\n                </Link>\n              </div>\n\n              <div className=\"UserPage_Book\">\n                <img src={newBook} alt=\"new Book\" />\n                <Link end to={\"/new/book\"}>\n                  New Book\n                </Link>\n              </div>\n\n              <div className=\"UserPage_Settings\">\n                <img src={settingImg} alt=\"paper\" />\n                <Link end to={\"/settings\"}>\n                  Settings\n                </Link>\n              </div>\n            </>\n          ) : (\n            <>\n              <div className=\"UserPage_Library\">\n                <img src={bookShelfImg} alt=\"bookshelf\" />\n                <Link\n                  end\n                  to={`/user/${username}/libraries`}\n                >{`${username}'s Libraries`}</Link>\n              </div>\n\n              <div className=\"UserPage_Book\">\n                <img src={newBook} alt=\"new Book\" />\n                <Link\n                  end\n                  to={`/user/${username}/books`}\n                >{`${username}'s Books`}</Link>\n              </div>\n            </>\n          )}\n        </div>\n      ) : (\n        <h1>loading...</h1>\n      )}\n    </>\n  );\n};\nexport default UserPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}