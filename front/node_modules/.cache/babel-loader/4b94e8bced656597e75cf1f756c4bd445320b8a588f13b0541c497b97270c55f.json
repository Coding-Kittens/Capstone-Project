{"ast":null,"code":"var _jsxFileName = \"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/src/libraries/Library.js\",\n  _s = $RefreshSig$();\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useState, useEffect, useContext } from \"react\";\nimport useAxios from \"../hooks/useAxios\";\nimport NewLibraryBook from \"../forms/NewLibraryBook\";\nimport LibraryBook from \"./LibraryBook\";\nimport Card from \"../pieces/Card\";\nimport { UserContext } from \"../context/context\";\n\n//show the library info and all the books in the library\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Library = () => {\n  _s();\n  const currentUser = useContext(UserContext);\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [reqBooks, books, setBooks] = useAxios([]);\n  const [reqLibrary, library] = useAxios(null);\n  const [addForm, setAddForm] = useState(false);\n\n  //gets the library and its books\n  useEffect(() => {\n    reqBooks(\"get\", `/libraries/${id}/books`, \"books\");\n    reqLibrary(\"get\", `/libraries/${id}`, \"library\");\n  }, []);\n\n  //adds a book to the library\n  const addBook = async data => {\n    await reqBooks(\"post\", `/users/${library.username}/libraries/books`, \"\", {\n      libraries: [id],\n      books: Object.keys(data)\n    });\n    await reqBooks(\"get\", `/libraries/${id}/books`, \"books\");\n    setAddForm(false);\n  };\n\n  //delets a book from the library\n  const deleteBook = async bookId => {\n    const res = await reqBooks(\"delete\", `/libraries/${id}/books/${bookId}`);\n    if (res.message === \"Deleted!\") setBooks(() => books.filter(book => book.id != bookId));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ListPage\",\n    children: [library ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Library\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: library.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [library.description, \", this library is\", \" \", library.is_public ? \"public\" : \"not public\", \".\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this) : null, books.length > 0 ? /*#__PURE__*/_jsxDEV(\"ol\", {\n      children: books.map(book => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(LibraryBook, {\n          book: book,\n          deleteBook: deleteBook\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 15\n        }, this)\n      }, book.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this) : null, library ? currentUser.username === library.username ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        title: \"Add book\",\n        handleClick: () => setAddForm(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => navigate(`/edit/library/${id}`),\n        name: \"button\",\n        children: \"Edit Library\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true) : null : null, addForm ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Library_Add_Book\",\n      children: [/*#__PURE__*/_jsxDEV(NewLibraryBook, {\n        addBook: addBook,\n        username: library.username,\n        title: \"title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setAddForm(false),\n        name: \"button\",\n        children: \"Cancle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(Library, \"yJSm2+4bBdc7ZftNS3tK9TSCUHw=\", false, function () {\n  return [useParams, useNavigate, useAxios, useAxios];\n});\n_c = Library;\nexport default Library;\nvar _c;\n$RefreshReg$(_c, \"Library\");","map":{"version":3,"names":["useParams","useNavigate","useState","useEffect","useContext","useAxios","NewLibraryBook","LibraryBook","Card","UserContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Library","_s","currentUser","id","navigate","reqBooks","books","setBooks","reqLibrary","library","addForm","setAddForm","addBook","data","username","libraries","Object","keys","deleteBook","bookId","res","message","filter","book","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","description","is_public","length","map","title","handleClick","type","onClick","_c","$RefreshReg$"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/front/src/libraries/Library.js"],"sourcesContent":["import { useParams, useNavigate } from \"react-router-dom\";\nimport { useState, useEffect, useContext } from \"react\";\nimport useAxios from \"../hooks/useAxios\";\nimport NewLibraryBook from \"../forms/NewLibraryBook\";\nimport LibraryBook from \"./LibraryBook\";\nimport Card from \"../pieces/Card\";\nimport { UserContext } from \"../context/context\";\n\n//show the library info and all the books in the library\nconst Library = () => {\n  const currentUser = useContext(UserContext);\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [reqBooks, books, setBooks] = useAxios([]);\n  const [reqLibrary, library] = useAxios(null);\n  const [addForm, setAddForm] = useState(false);\n\n  //gets the library and its books\n  useEffect(() => {\n    reqBooks(\"get\", `/libraries/${id}/books`, \"books\");\n    reqLibrary(\"get\", `/libraries/${id}`, \"library\");\n  }, []);\n\n  //adds a book to the library\n  const addBook = async (data) => {\n     await reqBooks(\n      \"post\",\n      `/users/${library.username}/libraries/books`,\n      \"\",\n      { libraries: [id], books: Object.keys(data) }\n    );\n    await reqBooks(\"get\", `/libraries/${id}/books`, \"books\");\n    setAddForm(false);\n  };\n\n  //delets a book from the library\n  const deleteBook = async (bookId) => {\n    const res = await reqBooks(\"delete\", `/libraries/${id}/books/${bookId}`);\n    if (res.message === \"Deleted!\")\n      setBooks(() => (books.filter((book) => book.id != bookId)));\n  };\n\n  return (\n    <div className=\"ListPage\">\n      {library ? (\n        <div className=\"Library\">\n          <h1>{library.name}</h1>\n          <p>\n            {library.description}, this library is{\" \"}\n            {library.is_public ? \"public\" : \"not public\"}.{\" \"}\n          </p>\n        </div>\n      ) : null}\n      {books.length > 0 ? (\n        <ol>\n          {books.map((book) => (\n            <li key={book.id}>\n              <LibraryBook book={book} deleteBook={deleteBook} />\n            </li>\n          ))}\n        </ol>\n      ) : null}\n\n      {library ? (\n        currentUser.username === library.username ? (\n          <>\n            <Card title=\"Add book\" handleClick={() => setAddForm(true)} />\n            <button\n              type=\"button\"\n              onClick={() => navigate(`/edit/library/${id}`)}\n              name=\"button\"\n            >\n              Edit Library\n            </button>\n          </>\n        ) : null\n      ) : null}\n\n      {addForm ? (\n        <div className=\"Library_Add_Book\">\n          <NewLibraryBook\n            addBook={addBook}\n            username={library.username}\n            title={\"title\"}\n          />\n          <button type=\"button\" onClick={() => setAddForm(false)} name=\"button\">\n            Cancle\n          </button>\n        </div>\n      ) : null}\n    </div>\n  );\n};\nexport default Library;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}