{"ast":null,"code":"var _jsxFileName = \"/Users/rosepowell/Desktop/Book_Writing/book_writing/src/CharacterBook.js\",\n  _s = $RefreshSig$();\nimport Character from './Character';\nimport PopUpForm from './forms/PopUpForm';\nimport { useState, useEffect } from 'react';\nimport useToggle from './hooks/useToggle';\nimport noteBook from './sprites/notes1.png';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CharacterBook = _ref => {\n  _s();\n  let {\n    bookId\n  } = _ref;\n  const [chars, setChars] = useState(null);\n  const [currChar, setCurrChar] = useState(null);\n  const [addForm, setAddForm] = useState(false);\n  const [editForm, setEditForm] = useState(false);\n  useEffect(() => {\n    const getChars = async () => {\n      const res = await axios.get(`/books/${bookId}/characters`);\n      if (res.data.characters.length > 0) {\n        setChars(n => n = res.data.characters);\n      }\n    };\n    getChars();\n  }, []);\n  const showContents = () => {\n    setCurrChar(null);\n  };\n  const changeCharacter = num => {\n    let newChar = currChar ? currChar + num : num;\n    if (newChar < 0) newChar = null;\n    if (newChar > chars.length) newChar = 0;\n    setCurrChar(newChar);\n  };\n  const addCharacter = async data => {\n    const res = await axios.post(`/books/${bookId}/characters`, data);\n    if (res.data.character) {\n      setChars(n => n = [...chars, res.data.character]);\n    }\n  };\n  const deleteCharacter = async characterId => {\n    const res = await axios.delete(`/books/${bookId}/characters/${characterId}`);\n    if (res.data.message === 'Deleted!') {\n      if (chars[currChar].id === characterId) {\n        changeCharacter(-1);\n      }\n      setChars(n => n = chars.map(char => {\n        if (char.id != characterId) return char;\n      }));\n    }\n  };\n  const editCharacter = async (characterId, data) => {\n    const res = await axios.patch(`/books/${bookId}/characters/${characterId}`, data);\n    if (res.data.character) {\n      setChars(n => n = chars.map(char => char.id != characterId ? char : res.data.character));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"NoteBook\",\n      src: noteBook,\n      alt: \"NoteBook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 1\n    }, this), addForm ? /*#__PURE__*/_jsxDEV(PopUpForm, {\n      closeForm: () => setAddForm(false),\n      submit: addCharacter,\n      inputs: [{\n        title: 'Name',\n        name: 'name'\n      }, {\n        title: 'Birthday',\n        name: 'birthday'\n      }, {\n        title: 'Description',\n        name: 'description'\n      }, {\n        title: 'Extra info',\n        name: 'extra_info'\n      }, {\n        title: 'Backstory',\n        name: 'story'\n      }],\n      initData: {\n        name: '',\n        birthday: '',\n        description: '',\n        extra_info: '',\n        story: ''\n      },\n      submitText: \"Add Character\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 1\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setAddForm(true),\n        name: \"button\",\n        children: \"New character\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        name: \"btn\",\n        children: \"Add existing character\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true), editForm ? /*#__PURE__*/_jsxDEV(PopUpForm, {\n      closeForm: () => setEditForm(false),\n      submit: editCharacter,\n      inputs: [{\n        title: 'Name',\n        name: 'name'\n      }, {\n        title: 'Birthday',\n        name: 'birthday'\n      }, {\n        title: 'Description',\n        name: 'description'\n      }, {\n        title: 'Extra info',\n        name: 'extra_info'\n      }, {\n        title: 'Backstory',\n        name: 'story'\n      }],\n      initData: {\n        name: '',\n        birthday: '',\n        description: '',\n        extra_info: '',\n        story: ''\n      },\n      submitText: \"Add Character\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 1\n    }, this) : null, currChar && chars ? /*#__PURE__*/_jsxDEV(Character, {\n      handleClick: () => setEditForm(true),\n      character: chars[currChar]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 3\n    }, this) : chars.map((char, inx) => /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: changeCharacter(inx),\n      name: \"button\",\n      children: char.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 27\n    }, this))]\n  }, void 0, true);\n};\n_s(CharacterBook, \"2icpiGqh/8oU4u4mcJWHtQu8Jeg=\");\n_c = CharacterBook;\nexport default CharacterBook;\nvar _c;\n$RefreshReg$(_c, \"CharacterBook\");","map":{"version":3,"names":["Character","PopUpForm","useState","useEffect","useToggle","noteBook","axios","CharacterBook","bookId","chars","setChars","currChar","setCurrChar","addForm","setAddForm","editForm","setEditForm","getChars","res","get","data","characters","length","n","showContents","changeCharacter","num","newChar","addCharacter","post","character","deleteCharacter","characterId","delete","message","id","map","char","editCharacter","patch","title","name","birthday","description","extra_info","story","inx"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/CharacterBook.js"],"sourcesContent":["import Character from './Character';\nimport PopUpForm from './forms/PopUpForm';\nimport {useState,useEffect} from 'react';\nimport useToggle from './hooks/useToggle';\nimport noteBook from './sprites/notes1.png'\nimport axios from 'axios';\nconst CharacterBook=({bookId})=>{\n\nconst [chars,setChars] = useState(null);\nconst [currChar,setCurrChar]=useState(null);\nconst [addForm,setAddForm] = useState(false);\nconst [editForm,setEditForm] = useState(false);\n\nuseEffect(()=>{\nconst getChars = async()=>{\n  const res = await axios.get(`/books/${bookId}/characters`);\n  if(res.data.characters.length>0){\n    setChars((n)=> n= res.data.characters);\n  }\n}\ngetChars();\n},[])\n\n\n\nconst showContents =()=>{\nsetCurrChar(null);\n}\n\nconst changeCharacter =(num)=>{\nlet newChar = currChar? currChar+num : num;\nif (newChar<0) newChar = null;\nif(newChar>chars.length) newChar =0;\nsetCurrChar(newChar);\n}\n\n\nconst addCharacter =async(data)=>{\n  const res = await axios.post(`/books/${bookId}/characters`,data);\n  if(res.data.character){\n    setChars((n)=> n= [...chars,res.data.character]);\n  }\n}\n\nconst deleteCharacter =async(characterId)=>{\n   const res = await axios.delete(`/books/${bookId}/characters/${characterId}`);\n   if(res.data.message === 'Deleted!'){\n     if(chars[currChar].id === characterId){\n       changeCharacter(-1);\n     }\n     setChars((n)=> n= chars.map(char=> {if(char.id != characterId)return char}));\n   }\n\n}\n\nconst editCharacter =async(characterId,data)=>{\n  const res = await axios.patch(`/books/${bookId}/characters/${characterId}`,data);\n  if(res.data.character){\n    setChars((n)=> n= chars.map(char=> char.id != characterId? char : res.data.character));\n  }\n}\n\nreturn<>\n<img className ='NoteBook' src={noteBook} alt=\"NoteBook\"/>\n{addForm?\n<PopUpForm closeForm ={()=>setAddForm(false)} submit={addCharacter} inputs={[{title: 'Name', name: 'name'},{title: 'Birthday', name:'birthday'},{title: 'Description', name:'description'},{title:'Extra info', name:'extra_info'},{title:'Backstory', name:'story'}]} initData={{name:'',birthday:'',description:'',extra_info:'',story:''}} submitText='Add Character'/>\n:<>\n<button type=\"button\" onClick={()=>setAddForm(true)} name=\"button\">New character</button>\n<button type=\"button\"  name=\"btn\">Add existing character</button>\n</>\n}\n\n{editForm?\n<PopUpForm closeForm ={()=>setEditForm(false)} submit={editCharacter} inputs={[{title: 'Name', name: 'name'},{title: 'Birthday', name:'birthday'},{title: 'Description', name:'description'},{title:'Extra info', name:'extra_info'},{title:'Backstory', name:'story'}]} initData={{name:'',birthday:'',description:'',extra_info:'',story:''}} submitText='Add Character'/>\n:null\n}\n\n{\n  currChar && chars?\n  <Character handleClick={()=>setEditForm(true)} character={chars[currChar]}/>\n  :\n  chars.map((char,inx) => <button type=\"button\" onClick={changeCharacter(inx)} name=\"button\">{char.name}</button>)\n}\n\n</>\n}\nexport default CharacterBook;\n"],"mappings":";;AAAA,OAAOA,SAAS,MAAM,aAAa;AACnC,OAAOC,SAAS,MAAM,mBAAmB;AACzC,SAAQC,QAAQ,EAACC,SAAS,QAAO,OAAO;AACxC,OAAOC,SAAS,MAAM,mBAAmB;AACzC,OAAOC,QAAQ,MAAM,sBAAsB;AAC3C,OAAOC,KAAK,MAAM,OAAO;AAAC;AAAA;AAC1B,MAAMC,aAAa,GAAC,QAAY;EAAA;EAAA,IAAX;IAACC;EAAM,CAAC;EAE7B,MAAM,CAACC,KAAK,EAACC,QAAQ,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EACvC,MAAM,CAACS,QAAQ,EAACC,WAAW,CAAC,GAACV,QAAQ,CAAC,IAAI,CAAC;EAC3C,MAAM,CAACW,OAAO,EAACC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAC5C,MAAM,CAACa,QAAQ,EAACC,WAAW,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAE9CC,SAAS,CAAC,MAAI;IACd,MAAMc,QAAQ,GAAG,YAAS;MACxB,MAAMC,GAAG,GAAG,MAAMZ,KAAK,CAACa,GAAG,CAAE,UAASX,MAAO,aAAY,CAAC;MAC1D,IAAGU,GAAG,CAACE,IAAI,CAACC,UAAU,CAACC,MAAM,GAAC,CAAC,EAAC;QAC9BZ,QAAQ,CAAEa,CAAC,IAAIA,CAAC,GAAEL,GAAG,CAACE,IAAI,CAACC,UAAU,CAAC;MACxC;IACF,CAAC;IACDJ,QAAQ,EAAE;EACV,CAAC,EAAC,EAAE,CAAC;EAIL,MAAMO,YAAY,GAAE,MAAI;IACxBZ,WAAW,CAAC,IAAI,CAAC;EACjB,CAAC;EAED,MAAMa,eAAe,GAAGC,GAAG,IAAG;IAC9B,IAAIC,OAAO,GAAGhB,QAAQ,GAAEA,QAAQ,GAACe,GAAG,GAAGA,GAAG;IAC1C,IAAIC,OAAO,GAAC,CAAC,EAAEA,OAAO,GAAG,IAAI;IAC7B,IAAGA,OAAO,GAAClB,KAAK,CAACa,MAAM,EAAEK,OAAO,GAAE,CAAC;IACnCf,WAAW,CAACe,OAAO,CAAC;EACpB,CAAC;EAGD,MAAMC,YAAY,GAAE,MAAMR,IAAI,IAAG;IAC/B,MAAMF,GAAG,GAAG,MAAMZ,KAAK,CAACuB,IAAI,CAAE,UAASrB,MAAO,aAAY,EAACY,IAAI,CAAC;IAChE,IAAGF,GAAG,CAACE,IAAI,CAACU,SAAS,EAAC;MACpBpB,QAAQ,CAAEa,CAAC,IAAIA,CAAC,GAAE,CAAC,GAAGd,KAAK,EAACS,GAAG,CAACE,IAAI,CAACU,SAAS,CAAC,CAAC;IAClD;EACF,CAAC;EAED,MAAMC,eAAe,GAAE,MAAMC,WAAW,IAAG;IACxC,MAAMd,GAAG,GAAG,MAAMZ,KAAK,CAAC2B,MAAM,CAAE,UAASzB,MAAO,eAAcwB,WAAY,EAAC,CAAC;IAC5E,IAAGd,GAAG,CAACE,IAAI,CAACc,OAAO,KAAK,UAAU,EAAC;MACjC,IAAGzB,KAAK,CAACE,QAAQ,CAAC,CAACwB,EAAE,KAAKH,WAAW,EAAC;QACpCP,eAAe,CAAC,CAAC,CAAC,CAAC;MACrB;MACAf,QAAQ,CAAEa,CAAC,IAAIA,CAAC,GAAEd,KAAK,CAAC2B,GAAG,CAACC,IAAI,IAAG;QAAC,IAAGA,IAAI,CAACF,EAAE,IAAIH,WAAW,EAAC,OAAOK,IAAI;MAAA,CAAC,CAAC,CAAC;IAC9E;EAEH,CAAC;EAED,MAAMC,aAAa,GAAE,OAAMN,WAAW,EAACZ,IAAI,KAAG;IAC5C,MAAMF,GAAG,GAAG,MAAMZ,KAAK,CAACiC,KAAK,CAAE,UAAS/B,MAAO,eAAcwB,WAAY,EAAC,EAACZ,IAAI,CAAC;IAChF,IAAGF,GAAG,CAACE,IAAI,CAACU,SAAS,EAAC;MACpBpB,QAAQ,CAAEa,CAAC,IAAIA,CAAC,GAAEd,KAAK,CAAC2B,GAAG,CAACC,IAAI,IAAGA,IAAI,CAACF,EAAE,IAAIH,WAAW,GAAEK,IAAI,GAAGnB,GAAG,CAACE,IAAI,CAACU,SAAS,CAAC,CAAC;IACxF;EACF,CAAC;EAED,oBAAM;IAAA,wBACN;MAAK,SAAS,EAAE,UAAU;MAAC,GAAG,EAAEzB,QAAS;MAAC,GAAG,EAAC;IAAU;MAAA;MAAA;MAAA;IAAA,QAAE,EACzDQ,OAAO,gBACR,QAAC,SAAS;MAAC,SAAS,EAAG,MAAIC,UAAU,CAAC,KAAK,CAAE;MAAC,MAAM,EAAEc,YAAa;MAAC,MAAM,EAAE,CAAC;QAACY,KAAK,EAAE,MAAM;QAAEC,IAAI,EAAE;MAAM,CAAC,EAAC;QAACD,KAAK,EAAE,UAAU;QAAEC,IAAI,EAAC;MAAU,CAAC,EAAC;QAACD,KAAK,EAAE,aAAa;QAAEC,IAAI,EAAC;MAAa,CAAC,EAAC;QAACD,KAAK,EAAC,YAAY;QAAEC,IAAI,EAAC;MAAY,CAAC,EAAC;QAACD,KAAK,EAAC,WAAW;QAAEC,IAAI,EAAC;MAAO,CAAC,CAAE;MAAC,QAAQ,EAAE;QAACA,IAAI,EAAC,EAAE;QAACC,QAAQ,EAAC,EAAE;QAACC,WAAW,EAAC,EAAE;QAACC,UAAU,EAAC,EAAE;QAACC,KAAK,EAAC;MAAE,CAAE;MAAC,UAAU,EAAC;IAAe;MAAA;MAAA;MAAA;IAAA,QAAE,gBACzW;MAAA,wBACD;QAAQ,IAAI,EAAC,QAAQ;QAAC,OAAO,EAAE,MAAI/B,UAAU,CAAC,IAAI,CAAE;QAAC,IAAI,EAAC,QAAQ;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAuB,eACzF;QAAQ,IAAI,EAAC,QAAQ;QAAE,IAAI,EAAC,KAAK;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAgC;IAAA,gBAC9D,EAGFC,QAAQ,gBACT,QAAC,SAAS;MAAC,SAAS,EAAG,MAAIC,WAAW,CAAC,KAAK,CAAE;MAAC,MAAM,EAAEsB,aAAc;MAAC,MAAM,EAAE,CAAC;QAACE,KAAK,EAAE,MAAM;QAAEC,IAAI,EAAE;MAAM,CAAC,EAAC;QAACD,KAAK,EAAE,UAAU;QAAEC,IAAI,EAAC;MAAU,CAAC,EAAC;QAACD,KAAK,EAAE,aAAa;QAAEC,IAAI,EAAC;MAAa,CAAC,EAAC;QAACD,KAAK,EAAC,YAAY;QAAEC,IAAI,EAAC;MAAY,CAAC,EAAC;QAACD,KAAK,EAAC,WAAW;QAAEC,IAAI,EAAC;MAAO,CAAC,CAAE;MAAC,QAAQ,EAAE;QAACA,IAAI,EAAC,EAAE;QAACC,QAAQ,EAAC,EAAE;QAACC,WAAW,EAAC,EAAE;QAACC,UAAU,EAAC,EAAE;QAACC,KAAK,EAAC;MAAE,CAAE;MAAC,UAAU,EAAC;IAAe;MAAA;MAAA;MAAA;IAAA,QAAE,GAC3W,IAAI,EAIHlC,QAAQ,IAAIF,KAAK,gBACjB,QAAC,SAAS;MAAC,WAAW,EAAE,MAAIO,WAAW,CAAC,IAAI,CAAE;MAAC,SAAS,EAAEP,KAAK,CAACE,QAAQ;IAAE;MAAA;MAAA;MAAA;IAAA,QAAE,GAE5EF,KAAK,CAAC2B,GAAG,CAAC,CAACC,IAAI,EAACS,GAAG,kBAAK;MAAQ,IAAI,EAAC,QAAQ;MAAC,OAAO,EAAErB,eAAe,CAACqB,GAAG,CAAE;MAAC,IAAI,EAAC,QAAQ;MAAA,UAAET,IAAI,CAACI;IAAI;MAAA;MAAA;MAAA;IAAA,QAAU,CAAC;EAAA,gBAG/G;AACH,CAAC;AAAA,GA/EKlC,aAAa;AAAA,KAAbA,aAAa;AAgFnB,eAAeA,aAAa;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}