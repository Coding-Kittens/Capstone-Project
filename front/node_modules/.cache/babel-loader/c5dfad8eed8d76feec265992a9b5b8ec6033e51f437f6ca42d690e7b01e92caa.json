{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Link,useParams}from\"react-router-dom\";import{useState,useEffect,useContext}from'react';import settingImg from'../sprites/settings.png';import bookImg from'../sprites/book4.png';import bookShelfImg from'../sprites/Librarybutton1.png';import tempImg from'../sprites/painting.png';import newBook from'../sprites/NewBook.png';import ink from'../sprites/ink2.png';import useAxios from'../hooks/useAxios';import useToggle from'../hooks/useToggle';import PopUpForm from'../forms/PopUpForm';import'../css/UserPage.css';import{UserContext}from\"../context/context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UserPage=function UserPage(){var currentUser=useContext(UserContext);var _useParams=useParams(),username=_useParams.username;// const [user,setUser]= useState();\nvar _useAxios=useAxios(null),_useAxios2=_slicedToArray(_useAxios,3),reqUser=_useAxios2[0],user=_useAxios2[1],setUser=_useAxios2[2];var _useToggle=useToggle(false),_useToggle2=_slicedToArray(_useToggle,3),editForm=_useToggle2[0],toggleEdit=_useToggle2[1],setEditForm=_useToggle2[2];useEffect(function(){var getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:reqUser('get',\"/users/\".concat(username),'user');// const res = await axios.get(`/users/${username}`);\n// // console.log(res);\n// if(res.data.user){\n//   setUser(res.data.user);\n// }\n// else{\n//   setUser(null);\n// }\ncase 1:case\"end\":return _context.stop();}}},_callee);}));return function getUser(){return _ref.apply(this,arguments);};}();getUser();},[]);var editUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return reqUser('patch',\"/users/\".concat(username),'user',data);case 2:res=_context2.sent;console.log(res);setEditForm(false);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function editUser(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:user&&currentUser?/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage\",children:[/*#__PURE__*/_jsx(\"img\",{id:\"BookImg\",src:bookImg,alt:\"book\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_1\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Autobiography\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Username: \",username]}),editForm?/*#__PURE__*/_jsx(PopUpForm,{submit:editUser,inputs:[{title:\"First name\",name:\"first_name\"},{title:\"Last name\",name:\"last_name\"},{title:\"Bio\",name:\"bio\"}],initData:{first_name:user.first_name,last_name:user.last_name,bio:user.bio?user.bio:''},submitText:\"Save\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Full Name: \",user.name]}),user.bio?/*#__PURE__*/_jsx(\"p\",{children:user.bio}):/*#__PURE__*/_jsx(\"p\",{children:currentUser.username===username?'No bio! Click on the ink and quil, to edit your Autobiography.':null})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_2\",children:[/*#__PURE__*/_jsx(\"img\",{id:\"profileImg\",src:tempImg,alt:\"profile pic\"}),currentUser.username===username?/*#__PURE__*/_jsx(\"img\",{onClick:toggleEdit,id:\"ink\",src:ink,alt:\"ink\"}):null]}),currentUser.username===username?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_Library\",children:[/*#__PURE__*/_jsx(\"img\",{src:bookShelfImg,alt:\"bookshelf\"}),/*#__PURE__*/_jsx(Link,{end:true,to:\"/new/library\",children:\"New Library\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_Book\",children:[/*#__PURE__*/_jsx(\"img\",{src:newBook,alt:\"new Book\"}),/*#__PURE__*/_jsx(Link,{end:true,to:\"/new/book\",children:\"New Book\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_Settings\",children:[/*#__PURE__*/_jsx(\"img\",{src:settingImg,alt:\"paper\"}),/*#__PURE__*/_jsx(Link,{end:true,to:\"/settings\",children:\"Settings\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_Library\",children:[/*#__PURE__*/_jsx(\"img\",{src:bookShelfImg,alt:\"bookshelf\"}),/*#__PURE__*/_jsx(Link,{end:true,to:\"/user/\".concat(username,\"/libraries\"),children:\"\".concat(username,\"'s Libraries\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"UserPage_Book\",children:[/*#__PURE__*/_jsx(\"img\",{src:newBook,alt:\"new Book\"}),/*#__PURE__*/_jsx(Link,{end:true,to:\"/user/\".concat(username,\"/books\"),children:\"\".concat(username,\"'s Books\")})]})]})]}):/*#__PURE__*/_jsx(\"h1\",{children:\"loading...\"})});};export default UserPage;","map":{"version":3,"names":["Link","useParams","useState","useEffect","useContext","settingImg","bookImg","bookShelfImg","tempImg","newBook","ink","useAxios","useToggle","PopUpForm","UserContext","UserPage","currentUser","username","reqUser","user","setUser","editForm","toggleEdit","setEditForm","getUser","editUser","data","res","console","log","title","name","first_name","last_name","bio"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/pages/UserPage.js"],"sourcesContent":["import { Link, useParams } from \"react-router-dom\";\nimport {useState,useEffect,useContext} from 'react';\nimport settingImg from '../sprites/settings.png';\nimport bookImg from'../sprites/book4.png';\nimport bookShelfImg from '../sprites/Librarybutton1.png';\nimport tempImg from '../sprites/painting.png';\nimport newBook from '../sprites/NewBook.png';\nimport ink from '../sprites/ink2.png';\n\nimport useAxios from '../hooks/useAxios';\nimport useToggle from '../hooks/useToggle';\nimport PopUpForm from '../forms/PopUpForm';\n\n\nimport '../css/UserPage.css';\nimport { UserContext } from \"../context/context\";\nconst UserPage =()=>{\n  const currentUser = useContext(UserContext);\n  const { username } = useParams();\n\n  // const [user,setUser]= useState();\n  const [reqUser,user,setUser]= useAxios(null);\nconst[editForm,toggleEdit,setEditForm] = useToggle(false);\n\n\n  useEffect(()=>{\n  const getUser = async()=>{\n    reqUser('get',`/users/${username}`,'user')\n    // const res = await axios.get(`/users/${username}`);\n    // // console.log(res);\n    // if(res.data.user){\n    //   setUser(res.data.user);\n    // }\n    // else{\n    //   setUser(null);\n    // }\n\n  }\n  getUser();\n  },[])\n\n\nconst editUser = async(data)=>{\nconst res = await reqUser('patch',`/users/${username}`,'user',data);\nconsole.log(res);\nsetEditForm(false);\n}\n\n\n\nreturn <>\n{user&&currentUser? <div className=\"UserPage\">\n <img id=\"BookImg\" src={bookImg} alt=\"book\"/>\n\n\n <div className=\"UserPage_1\">\n   <h1>Autobiography</h1>\n   <h2>Username: {username}</h2>\n   {editForm ? (\n     <PopUpForm\n       submit={editUser}\n       inputs={[\n         { title: \"First name\", name: \"first_name\" },\n         { title: \"Last name\", name: \"last_name\" },\n         { title: \"Bio\", name: \"bio\" },\n       ]}\n       initData={{\n         first_name: user.first_name,\n         last_name: user.last_name,\n         bio: user.bio? user.bio:'',\n       }}\n       submitText=\"Save\"\n     />\n   ) : <><h2>Full Name: {user.name}</h2>\n    {user.bio?\n      <p>{user.bio}</p>:\n      <p>{currentUser.username === username? 'No bio! Click on the ink and quil, to edit your Autobiography.':null}</p>\n    }</>\n   }\n </div>\n\n\n\n\n<div className=\"UserPage_2\">\n<img id=\"profileImg\" src={tempImg} alt=\"profile pic\"/>\n{currentUser.username === username? <img  onClick={toggleEdit} id=\"ink\" src={ink} alt=\"ink\"/>:null}\n</div>\n\n{currentUser.username === username?\n\n<>\n<div className='UserPage_Library'>\n<img src={bookShelfImg} alt=\"bookshelf\"/>\n<Link end to={\"/new/library\"}>New Library</Link>\n</div>\n\n<div className='UserPage_Book'>\n <img src={newBook} alt=\"new Book\"/>\n<Link end to={\"/new/book\"}>New Book</Link>\n</div>\n\n<div className='UserPage_Settings'>\n<img src={settingImg} alt=\"paper\"/>\n<Link end to={\"/settings\"}>Settings</Link>\n</div>\n</>\n\n:<>\n<div className='UserPage_Library'>\n<img src={bookShelfImg} alt=\"bookshelf\"/>\n<Link end to={`/user/${username}/libraries`}>{`${username}'s Libraries`}</Link>\n</div>\n\n<div className='UserPage_Book'>\n <img src={newBook} alt=\"new Book\"/>\n<Link end to={`/user/${username}/books`}>{`${username}'s Books`}</Link>\n</div>\n</>\n}\n\n\n\n\n</div> :\n<h1>loading...</h1>\n}\n</>\n\n}\nexport default UserPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}