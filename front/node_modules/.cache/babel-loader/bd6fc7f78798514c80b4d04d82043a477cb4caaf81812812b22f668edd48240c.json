{"ast":null,"code":"var _jsxFileName = \"/Users/rosepowell/Desktop/Book_Writing/book_writing/src/libraries/Library.js\",\n  _s = $RefreshSig$();\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport useAxios from '../hooks/useAxios';\nimport NewLibraryBook from '../forms/NewLibraryBook';\nimport LibraryBook from './LibraryBook';\nimport Card from '../pieces/Card';\nimport { UserContext } from \"../context/context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Library = () => {\n  _s();\n  const currentUser = useContext(UserContext);\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [reqBooks, books, setBooks] = useAxios([]);\n  const [reqLibrary, library, setLibrary] = useAxios(null);\n  const [addForm, setAddForm] = useState(false);\n  useEffect(() => {\n    reqBooks('get', `/libraries/${id}/books`, 'books');\n    reqLibrary('get', `/libraries/${id}`, 'library');\n  }, []);\n  const addBook = async data => {\n    const res = await reqBooks('post', `/users/${library.username}/libraries/books`, '', {\n      libraries: [id],\n      books: Object.keys(data)\n    });\n    await reqBooks('get', `/libraries/${id}/books`, 'books');\n    setAddForm(false);\n  };\n  const deleteBook = async bookId => {\n    const res = await reqBooks('delete', `/libraries/${id}/books/${bookId}`);\n    if (res.message === 'Deleted!') setBooks(n => n = books.filter(book => book.id != bookId));\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [library ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Library\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: library.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [library.description, \", this library is \", library.is_public ? 'public' : \"not public\", \". \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }, this) : null, books.length > 0 ? /*#__PURE__*/_jsxDEV(\"ol\", {\n      children: books.map(book => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(LibraryBook, {\n          book: book,\n          deleteBook: deleteBook\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 28\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 24\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 3\n    }, this) : null, currentUser.username === library.username ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        title: \"Add book\",\n        handleClick: () => setAddForm(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => navigate(`/edit/library/${id}`),\n        name: \"button\",\n        children: \"Edit Library\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true) : null, addForm ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Library_Add_Book\",\n      children: [/*#__PURE__*/_jsxDEV(NewLibraryBook, {\n        addBook: addBook,\n        username: library.username,\n        title: 'title'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setAddForm(false),\n        name: \"button\",\n        children: \"Cancle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 3\n    }, this) : null]\n  }, void 0, true);\n};\n_s(Library, \"SWziZizkiHW+aFn4n9f2v/QaU8g=\", false, function () {\n  return [useParams, useNavigate, useAxios, useAxios];\n});\n_c = Library;\nexport default Library;\nvar _c;\n$RefreshReg$(_c, \"Library\");","map":{"version":3,"names":["useParams","useNavigate","useState","useEffect","useContext","axios","useAxios","NewLibraryBook","LibraryBook","Card","UserContext","Library","currentUser","id","navigate","reqBooks","books","setBooks","reqLibrary","library","setLibrary","addForm","setAddForm","addBook","data","res","username","libraries","Object","keys","deleteBook","bookId","message","n","filter","book","name","description","is_public","length","map"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/libraries/Library.js"],"sourcesContent":["import { useParams, useNavigate } from \"react-router-dom\";\nimport {useState,useEffect,useContext} from 'react';\nimport axios from 'axios';\nimport useAxios from '../hooks/useAxios';\nimport NewLibraryBook from '../forms/NewLibraryBook';\nimport LibraryBook from './LibraryBook';\nimport Card from '../pieces/Card';\nimport { UserContext } from \"../context/context\";\nconst Library =()=>{\n  const currentUser = useContext(UserContext);\nconst { id } = useParams();\n  const navigate = useNavigate();\nconst [reqBooks,books,setBooks] = useAxios([]);\nconst [reqLibrary,library,setLibrary] = useAxios(null);\nconst [addForm,setAddForm] = useState(false);\n\n\nuseEffect(()=>{\n  reqBooks('get',`/libraries/${id}/books`,'books');\n  reqLibrary('get',`/libraries/${id}`,'library');\n},[])\n\n\nconst addBook=async(data)=>{\nconst res = await reqBooks('post',`/users/${library.username}/libraries/books`,'',{libraries:[id],books:Object.keys(data)})\nawait reqBooks('get',`/libraries/${id}/books`,'books');\nsetAddForm(false)\n}\n\nconst deleteBook=async(bookId)=>{\nconst res = await reqBooks('delete',`/libraries/${id}/books/${bookId}`);\nif(res.message === 'Deleted!')setBooks((n)=>n= books.filter(book=> book.id !=bookId));\n}\n\n\n\n  return<>\n  {library?\n    <div className='Library'>\n    <h1>{library.name}</h1>\n  <p>{library.description}, this library is {library.is_public? 'public': \"not public\"}. </p>\n  </div>\n  :\n  null\n}\n{books.length>0?\n  <ol>\n    {books.map(book => <li><LibraryBook book={book} deleteBook={deleteBook}/></li>)}\n  </ol>\n:\nnull\n}\n\n\n\n{currentUser.username===library.username?\n  <>\n  <Card title='Add book' handleClick={()=>setAddForm(true)}/>\n  <button type=\"button\" onClick={()=>navigate(`/edit/library/${id}`)} name=\"button\">Edit Library</button>\n  </>\n  :\n  null\n}\n\n\n{\n  addForm?\n  <div className='Library_Add_Book'>\n  <NewLibraryBook addBook={addBook} username={library.username} title={'title'}/>\n  <button type=\"button\" onClick={()=>setAddForm(false)} name=\"button\">Cancle</button>\n  </div>\n  :null\n}\n\n\n  </>\n}\nexport default Library;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}