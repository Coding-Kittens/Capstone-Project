{"ast":null,"code":"var _jsxFileName = \"/Users/rosepowell/Desktop/Book_Writing/book_writing/src/NoteBook.js\",\n  _s = $RefreshSig$();\nimport PopUpForm from './forms/PopUpForm';\nimport NewBookCharacterForm from './forms/NewBookCharacterForm';\nimport { useState, useEffect } from 'react';\nimport useToggle from './hooks/useToggle';\nimport noteBook from './sprites/notes1.png';\nimport axios from 'axios';\nimport './css/CharacterBook.css';\nimport NotePage from './NotePage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NoteBook = _ref => {\n  _s();\n  let {\n    bookId,\n    username\n  } = _ref;\n  const [notes, setNotes] = useState([]);\n  const [currNote, setCurrNote] = useState(null);\n  const [addForm, setAddForm] = useState(false);\n  const [editForm, setEditForm] = useState(false);\n  const [addExistingForm, setAddExistingForm] = useState(false);\n  useEffect(() => {\n    const getNotes = async () => {\n      const res = await axios.get(`/books/${bookId}/notes`);\n      if (res.data.notes.length > 0) {\n        setNotes(n => n = res.data.notes);\n      }\n    };\n    getNotes();\n  }, []);\n  const showContents = () => {\n    setCurrNote(null);\n  };\n  const changeNote = num => {\n    let newNote = currNote ? currNote + num : num;\n    if (newNote < 0) newNote = null;\n    if (newNote > notes.length) newNote = 0;\n    setCurrNote(newNote);\n  };\n  const addNote = async data => {\n    const res = await axios.post(`/books/${bookId}/notes`, data);\n    if (res.data.notes) {\n      setNotes(n => n = [...notes, res.data.notes]);\n    }\n  };\n  const deleteNote = async noteId => {\n    const res = await axios.delete(`/books/${bookId}/notes/${noteId}`);\n    console.log(res);\n    if (res.data.message === 'Deleted!') {\n      if (currNote) {\n        if (notes[currNote].id === noteId) {\n          changeNote(-1);\n        }\n      }\n      let updatedNotes = notes.map(note => {\n        if (note.id != noteId) return note;\n      });\n      if (!updatedNotes[0]) updatedNotes = [];\n      setNotes(n => n = updatedNotes);\n    }\n  };\n  const editNote = async data => {\n    const noteId = notes[currNote].id;\n    const res = await axios.patch(`/notes/${noteId}`, data);\n    if (res.data.notes) {\n      setNotes(n => n = notes.map(note => note.id != noteId ? note : res.data.notes));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"CharacterBook_Image\",\n      src: noteBook,\n      alt: \"NoteBook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 3\n    }, this), editForm ? /*#__PURE__*/_jsxDEV(PopUpForm, {\n      closeForm: () => setEditForm(false),\n      submit: editNote,\n      inputs: [{\n        title: 'Name',\n        name: 'name'\n      }, {\n        title: 'Birthday',\n        name: 'birthday'\n      }, {\n        title: 'Description',\n        name: 'description'\n      }, {\n        title: 'Extra info',\n        name: 'extra_info'\n      }, {\n        title: 'Backstory',\n        name: 'story'\n      }],\n      initData: {\n        name: '',\n        birthday: '',\n        description: '',\n        extra_info: '',\n        story: ''\n      },\n      submitText: \"Add Character\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 3\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CharacterBook\",\n      children: [currNote ? null : /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Table of Contents\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 6\n      }, this), currNote && notes.length > 0 ? /*#__PURE__*/_jsxDEV(NotePage, {\n        handleClick: () => setEditForm(true),\n        note: notes[currNote],\n        deleteNote: deleteNote\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 5\n      }, this) : notes.map((note, inx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"CharLink\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => changeNote(inx),\n          name: \"button\",\n          children: note.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => deleteNote(note.id),\n          name: \"button\",\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 5\n        }, this)]\n      }, note.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 29\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 3\n    }, this), addForm ? /*#__PURE__*/_jsxDEV(PopUpForm, {\n      closeForm: () => setAddForm(false),\n      submit: addNote,\n      inputs: [{\n        title: 'Name',\n        name: 'name'\n      }, {\n        title: 'Birthday',\n        name: 'birthday'\n      }, {\n        title: 'Description',\n        name: 'description'\n      }, {\n        title: 'Extra info',\n        name: 'extra_info'\n      }, {\n        title: 'Backstory',\n        name: 'story'\n      }],\n      initData: {\n        name: '',\n        birthday: '',\n        description: '',\n        extra_info: '',\n        story: ''\n      },\n      submitText: \"Add Character\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 3\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"CharacterBook_button\",\n        onClick: () => setAddForm(true),\n        name: \"button\",\n        children: \"New note\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 3\n      }, this)\n    }, void 0, false)]\n  }, void 0, true);\n};\n_s(NoteBook, \"XeRvelymznSOhRbrq6Supuo8Vig=\");\n_c = NoteBook;\nexport default NoteBook;\nvar _c;\n$RefreshReg$(_c, \"NoteBook\");","map":{"version":3,"names":["PopUpForm","NewBookCharacterForm","useState","useEffect","useToggle","noteBook","axios","NotePage","NoteBook","bookId","username","notes","setNotes","currNote","setCurrNote","addForm","setAddForm","editForm","setEditForm","addExistingForm","setAddExistingForm","getNotes","res","get","data","length","n","showContents","changeNote","num","newNote","addNote","post","deleteNote","noteId","delete","console","log","message","id","updatedNotes","map","note","editNote","patch","title","name","birthday","description","extra_info","story","inx"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/NoteBook.js"],"sourcesContent":["\nimport PopUpForm from './forms/PopUpForm';\nimport NewBookCharacterForm from './forms/NewBookCharacterForm';\nimport {useState,useEffect} from 'react';\nimport useToggle from './hooks/useToggle';\nimport noteBook from './sprites/notes1.png';\nimport axios from 'axios';\nimport './css/CharacterBook.css';\n\nimport NotePage from './NotePage';\nconst NoteBook=({bookId,username})=>{\n\n  const [notes,setNotes] = useState([]);\n  const [currNote,setCurrNote]=useState(null);\n  const [addForm,setAddForm] = useState(false);\n  const [editForm,setEditForm] = useState(false);\n  const [addExistingForm,setAddExistingForm] = useState(false);\n\n\n\n  useEffect(()=>{\n  const getNotes = async()=>{\n    const res = await axios.get(`/books/${bookId}/notes`);\n    if(res.data.notes.length>0){\n      setNotes((n)=> n= res.data.notes);\n    }\n  }\n  getNotes();\n  },[])\n\n\n\n  const showContents =()=>{\n  setCurrNote(null);\n  }\n\n  const changeNote =(num)=>{\n  let newNote = currNote? currNote+num : num;\n  if (newNote<0) newNote = null;\n  if(newNote>notes.length) newNote =0;\n  setCurrNote(newNote);\n  }\n\n\n  const addNote =async(data)=>{\n    const res = await axios.post(`/books/${bookId}/notes`,data);\n    if(res.data.notes){\n      setNotes((n)=> n= [...notes,res.data.notes]);\n    }\n  }\n\n  const deleteNote =async(noteId)=>{\n     const res = await axios.delete(`/books/${bookId}/notes/${noteId}`);\n     console.log(res);\n     if(res.data.message === 'Deleted!'){\n       if(currNote){\n         if(notes[currNote].id === noteId){\n           changeNote(-1);\n         }\n       }\n       let updatedNotes = notes.map(note=> {if(note.id != noteId)return note})\n       if(!updatedNotes[0]) updatedNotes=[];\n       setNotes((n)=> n= updatedNotes);\n     }\n\n  }\n\n  const editNote =async(data)=>{\n    const noteId = notes[currNote].id\n    const res = await axios.patch(`/notes/${noteId}`,data);\n    if(res.data.notes){\n      setNotes((n)=> n= notes.map(note=> note.id != noteId? note : res.data.notes));\n    }\n  }\n\n\n\n  return <>\n  <img className ='CharacterBook_Image' src={noteBook} alt=\"NoteBook\"/>\n\n  {editForm?\n  <PopUpForm closeForm ={()=>setEditForm(false)} submit={editNote} inputs={[{title: 'Name', name: 'name'},{title: 'Birthday', name:'birthday'},{title: 'Description', name:'description'},{title:'Extra info', name:'extra_info'},{title:'Backstory', name:'story'}]} initData={{name:'',birthday:'',description:'',extra_info:'',story:''}} submitText='Add Character'/>\n  :null\n  }\n\n  <div className='CharacterBook'>\n\n  {\n    currNote?\n    null\n    :<h3>Table of Contents</h3>\n  }\n\n  {\n    currNote && notes.length>0?\n    <NotePage handleClick={()=>setEditForm(true)} note={notes[currNote]} deleteNote={deleteNote}/>\n    :\n    notes.map((note,inx) => <div className='CharLink' key={note.id}>\n    <button type=\"button\" onClick={()=>changeNote(inx)} name=\"button\">{note.name}</button>\n    <button type=\"button\" onClick={()=>deleteNote(note.id)} name=\"button\">X</button>\n  </div>\n  )\n  }\n\n  </div>\n\n  {addForm?\n  <PopUpForm closeForm ={()=>setAddForm(false)} submit={addNote} inputs={[{title: 'Name', name: 'name'},{title: 'Birthday', name:'birthday'},{title: 'Description', name:'description'},{title:'Extra info', name:'extra_info'},{title:'Backstory', name:'story'}]} initData={{name:'',birthday:'',description:'',extra_info:'',story:''}} submitText='Add Character'/>\n  :<>\n  <button type=\"button\" className='CharacterBook_button' onClick={()=>setAddForm(true)} name=\"button\">New note</button>\n  </>\n  }\n  </>\n\n\n\n\n}\nexport default NoteBook;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}