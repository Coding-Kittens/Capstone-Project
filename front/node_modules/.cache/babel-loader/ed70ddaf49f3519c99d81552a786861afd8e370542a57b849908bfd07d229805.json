{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rosepowell/Desktop/desktop stuff/myprojects/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/desktop stuff/myprojects/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/desktop stuff/myprojects/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useNavigate}from\"react-router-dom\";import{useState,useEffect,useContext}from\"react\";import useAxios from\"../hooks/useAxios\";import{UserContext}from\"../context/context\";import Card from\"../pieces/Card\";import NewLibraryBook from\"../forms/NewLibraryBook\";import\"../css/Search.css\";//searches for books libraries, or users\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(_ref){var title=_ref.title,_ref$searchFor=_ref.searchFor,searchFor=_ref$searchFor===void 0?0:_ref$searchFor;var currentUser=useContext(UserContext);var navigate=useNavigate();var _useAxios=useAxios([]),_useAxios2=_slicedToArray(_useAxios,2),reqLibraries=_useAxios2[0],libraries=_useAxios2[1];var _useAxios3=useAxios([]),_useAxios4=_slicedToArray(_useAxios3,2),reqBooks=_useAxios4[0],books=_useAxios4[1];var _useAxios5=useAxios([]),_useAxios6=_slicedToArray(_useAxios5,2),reqUsers=_useAxios6[0],users=_useAxios6[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),addForm=_useState2[0],setAddForm=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),bookId=_useState4[0],setBookId=_useState4[1];var username=null;if(currentUser)username=currentUser.username;//gets librarys books or users depending on searchFor\n//if its 0 then books\n//1 Libraries\n//2 both books and libraries\n//3 users\nuseEffect(function(){if(searchFor===0||searchFor===2){reqBooks(\"get\",\"/books\",\"books\");}if(searchFor>0&&searchFor<3){reqLibraries(\"get\",\"/libraries/public/0\",\"libraries\");}if(searchFor>=3){reqUsers(\"get\",\"/users\",\"users\");}},[]);var addBook=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return reqBooks(\"post\",\"/users/\".concat(username,\"/libraries/books\"),\"\",{libraries:Object.keys(data.libraries),books:[data.bookId]});case 2:setAddForm(function(){return false;});case 3:case\"end\":return _context.stop();}},_callee);}));return function addBook(_x){return _ref2.apply(this,arguments);};}();var handleClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setBookId(function(){return id;});setAddForm(function(){return true;});case 2:case\"end\":return _context2.stop();}},_callee2);}));return function handleClick(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"ListPage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:title}),users.length>0?users.map(function(user){return/*#__PURE__*/_jsx(Card,{title:user.username,texts:[user.name],handleClick:function handleClick(){return navigate(\"/user/\".concat(user.username));}},user.username);}):null,libraries.length>0?libraries.map(function(library){return/*#__PURE__*/_jsx(Card,{title:library.name,texts:[library.description,\"\".concat(library.is_public?\"public\":\"private\")],handleClick:function handleClick(){return navigate(\"/library/\".concat(library.id));}},library.id);}):null,books.length>0?books.map(function(book){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card,{title:book.title,texts:[book.synopsys,\"\".concat(book.is_public?\"public\":\"private\")],handleClick:function handleClick(){return navigate(\"/book/\".concat(book.id));}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleClick(book.id);},name:\"button\",children:\"Add To Library\"},book.id),addForm&&username?/*#__PURE__*/_jsxs(\"div\",{className:\"Library_Add_Book\",children:[/*#__PURE__*/_jsx(NewLibraryBook,{bookId:bookId,addBook:addBook,username:username,title:\"name\",isBooks:false,msg:\"No Libraries to add to!\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return setAddForm(false);},name:\"button\",children:\"Cancle\"})]}):null]},book.id);}):null]});};export default Search;","map":{"version":3,"names":["useNavigate","useState","useEffect","useContext","useAxios","UserContext","Card","NewLibraryBook","jsx","_jsx","jsxs","_jsxs","Search","_ref","title","_ref$searchFor","searchFor","currentUser","navigate","_useAxios","_useAxios2","_slicedToArray","reqLibraries","libraries","_useAxios3","_useAxios4","reqBooks","books","_useAxios5","_useAxios6","reqUsers","users","_useState","_useState2","addForm","setAddForm","_useState3","_useState4","bookId","setBookId","username","addBook","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","concat","Object","keys","stop","_x","apply","arguments","handleClick","_ref3","_callee2","id","_callee2$","_context2","_x2","className","children","length","map","user","texts","name","library","description","is_public","book","synopsys","type","onClick","isBooks","msg"],"sources":["/Users/rosepowell/Desktop/desktop stuff/myprojects/Book_Writing/book_writing/front/src/pages/Search.js"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\nimport { useState, useEffect, useContext } from \"react\";\nimport useAxios from \"../hooks/useAxios\";\nimport { UserContext } from \"../context/context\";\nimport Card from \"../pieces/Card\";\nimport NewLibraryBook from \"../forms/NewLibraryBook\";\nimport \"../css/Search.css\";\n\n//searches for books libraries, or users\nconst Search = ({ title, searchFor = 0 }) => {\n  const currentUser = useContext(UserContext);\n\n  const navigate = useNavigate();\n  const [reqLibraries, libraries] = useAxios([]);\n  const [reqBooks, books] = useAxios([]);\n  const [reqUsers, users] = useAxios([]);\n  const [addForm, setAddForm] = useState(false);\n  const [bookId, setBookId] = useState(null);\n\n  let username = null;\n  if (currentUser) username = currentUser.username;\n\n  //gets librarys books or users depending on searchFor\n  //if its 0 then books\n  //1 Libraries\n  //2 both books and libraries\n  //3 users\n  useEffect(() => {\n    if (searchFor === 0 || searchFor === 2) {\n      reqBooks(\"get\", \"/books\", \"books\");\n    }\n    if (searchFor > 0 && searchFor < 3) {\n      reqLibraries(\"get\", \"/libraries/public/0\", \"libraries\");\n    }\n    if (searchFor >= 3) {\n      reqUsers(\"get\", \"/users\", \"users\");\n    }\n  }, []);\n\n  const addBook = async (data) => {\n    await reqBooks(\"post\", `/users/${username}/libraries/books`, \"\", {\n      libraries: Object.keys(data.libraries),\n      books: [data.bookId],\n    });\n    setAddForm(() => false);\n  };\n\n  const handleClick = async (id) => {\n    setBookId(() => id);\n    setAddForm(() => true);\n  };\n\n  return (\n    <div className=\"ListPage\">\n      <h1>{title}</h1>\n      {users.length > 0\n        ? users.map((user) => (\n            <Card\n              key={user.username}\n              title={user.username}\n              texts={[user.name]}\n              handleClick={() => navigate(`/user/${user.username}`)}\n            />\n          ))\n        : null}\n\n      {libraries.length > 0\n        ? libraries.map((library) => (\n            <Card\n              key={library.id}\n              title={library.name}\n              texts={[\n                library.description,\n                `${library.is_public ? \"public\" : \"private\"}`,\n              ]}\n              handleClick={() => navigate(`/library/${library.id}`)}\n            />\n          ))\n        : null}\n      {books.length > 0\n        ? books.map((book) => (\n            <div key={book.id}>\n              <Card\n                title={book.title}\n                texts={[\n                  book.synopsys,\n                  `${book.is_public ? \"public\" : \"private\"}`,\n                ]}\n                handleClick={() => navigate(`/book/${book.id}`)}\n              />\n              <button\n                key={book.id}\n                type=\"button\"\n                onClick={() => handleClick(book.id)}\n                name=\"button\"\n              >\n                Add To Library\n              </button>\n              {addForm && username ? (\n                <div className=\"Library_Add_Book\">\n                  <NewLibraryBook\n                    bookId={bookId}\n                    addBook={addBook}\n                    username={username}\n                    title=\"name\"\n                    isBooks={false}\n                    msg=\"No Libraries to add to!\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setAddForm(false)}\n                    name=\"button\"\n                  >\n                    Cancle\n                  </button>\n                </div>\n              ) : null}\n            </div>\n          ))\n        : null}\n    </div>\n  );\n};\nexport default Search;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}