{"ast":null,"code":"var _jsxFileName = \"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/src/notes/PlaceBook.js\",\n  _s = $RefreshSig$();\nimport Place from \"./Place\";\nimport PlaceForm from \"../forms/PlaceForm\";\nimport { useState, useEffect } from \"react\";\nimport noteBook from \"../sprites/notes1.png\";\nimport useAxios from \"../hooks/useAxios\";\n\n//shows all the places for a book\n//lets you look at just one place\n//you can flip between places\n//you can add edit or delete a place\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PlaceBook = _ref => {\n  _s();\n  let {\n    bookId\n  } = _ref;\n  const [reqPlaces, places, setPlaces] = useAxios([], true);\n  const [currPlace, setCurrPlace] = useState(null);\n  const [addForm, setAddForm] = useState(false);\n  const [editForm, setEditForm] = useState(false);\n\n  //gets all the places for a book\n  useEffect(() => {\n    reqPlaces(\"get\", `/books/${bookId}/places`, \"places\");\n  }, []);\n\n  //changes the current place so you can flip between places\n  const changePlace = num => {\n    let newPlace = currPlace ? currPlace + num : num;\n    if (newPlace < 0) newPlace = null;\n    if (newPlace > places.length) newPlace = 0;\n    setCurrPlace(newPlace);\n  };\n\n  //adds a place\n  const addPlace = async data => {\n    reqPlaces(\"post\", `/books/${bookId}/places`, \"place\", data);\n  };\n\n  //deletes a place\n  const deletePlace = async placeId => {\n    const res = await reqPlaces(\"delete\", `/books/${bookId}/places/${placeId}`);\n    if (res.message === \"Deleted!\") {\n      //if you are on that place page it changes it to the place before the current one\n      if (currPlace) {\n        if (places[currPlace - 1].id === placeId) {\n          changePlace(-1);\n        }\n      }\n      let updatedPlaces = places.filter(place => {\n        if (place.id !== placeId) return place;\n      });\n      if (!updatedPlaces[0]) updatedPlaces = [];\n      setPlaces(() => updatedPlaces);\n    }\n  };\n\n  //edits a place\n  const editPlace = async data => {\n    const placeId = places[currPlace - 1].id;\n    reqPlaces(\"patch\", `/books/${bookId}/places/${placeId}`, \"place\", data);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"CharacterBook_Image\",\n      src: noteBook,\n      alt: \"NoteBook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), currPlace && editForm ? /*#__PURE__*/_jsxDEV(PlaceForm, {\n      closeForm: () => setEditForm(false),\n      submit: editPlace,\n      place: places[currPlace - 1],\n      submitText: \"Edit Place\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CharacterBook\",\n      children: [currPlace ? null : /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Table of Contents\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 29\n      }, this), currPlace && places.length > 0 ? /*#__PURE__*/_jsxDEV(Place, {\n        handleClick: () => setEditForm(true),\n        place: places[currPlace - 1],\n        deletePlace: deletePlace\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this) : places.map((place, inx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"CharLink\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => changePlace(inx + 1),\n          name: \"button\",\n          children: place.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => deletePlace(place.id),\n          name: \"button\",\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 15\n        }, this)]\n      }, place.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), addForm ? /*#__PURE__*/_jsxDEV(PlaceForm, {\n      closeForm: () => setAddForm(false),\n      submit: addPlace,\n      submitText: \"Add Place\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"CharacterBook_button\",\n        onClick: () => setAddForm(true),\n        name: \"button\",\n        children: \"New place\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CharacterBook_Back\",\n      onClick: () => changePlace(-1)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CharacterBook_Next\",\n      onClick: () => changePlace(1)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(PlaceBook, \"JrJ9e9ESsfzuDO6KYJolwSAzGK8=\", false, function () {\n  return [useAxios];\n});\n_c = PlaceBook;\nexport default PlaceBook;\nvar _c;\n$RefreshReg$(_c, \"PlaceBook\");","map":{"version":3,"names":["Place","PlaceForm","useState","useEffect","noteBook","useAxios","jsxDEV","_jsxDEV","Fragment","_Fragment","PlaceBook","_ref","_s","bookId","reqPlaces","places","setPlaces","currPlace","setCurrPlace","addForm","setAddForm","editForm","setEditForm","changePlace","num","newPlace","length","addPlace","data","deletePlace","placeId","res","message","id","updatedPlaces","filter","place","editPlace","children","className","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","closeForm","submit","submitText","handleClick","map","inx","type","onClick","name","_c","$RefreshReg$"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/front/src/notes/PlaceBook.js"],"sourcesContent":["import Place from \"./Place\";\nimport PlaceForm from \"../forms/PlaceForm\";\n\nimport { useState, useEffect } from \"react\";\n\nimport noteBook from \"../sprites/notes1.png\";\nimport useAxios from \"../hooks/useAxios\";\n\n//shows all the places for a book\n//lets you look at just one place\n//you can flip between places\n//you can add edit or delete a place\nconst PlaceBook = ({ bookId }) => {\n  const [reqPlaces, places, setPlaces] = useAxios([], true);\n  const [currPlace, setCurrPlace] = useState(null);\n  const [addForm, setAddForm] = useState(false);\n  const [editForm, setEditForm] = useState(false);\n\n\n  //gets all the places for a book\n  useEffect(() => {\n    reqPlaces(\"get\", `/books/${bookId}/places`, \"places\");\n  }, []);\n\n  //changes the current place so you can flip between places\n  const changePlace = (num) => {\n    let newPlace = currPlace ? currPlace + num : num;\n    if (newPlace < 0) newPlace = null;\n    if (newPlace > places.length) newPlace = 0;\n    setCurrPlace(newPlace);\n  };\n\n  //adds a place\n  const addPlace = async (data) => {\n    reqPlaces(\"post\", `/books/${bookId}/places`, \"place\", data);\n  };\n\n  //deletes a place\n  const deletePlace = async (placeId) => {\n    const res = await reqPlaces(\"delete\", `/books/${bookId}/places/${placeId}`);\n\n    if (res.message === \"Deleted!\") {\n      //if you are on that place page it changes it to the place before the current one\n      if (currPlace) {\n        if (places[currPlace - 1].id === placeId) {\n          changePlace(-1);\n        }\n      }\n      let updatedPlaces = places.filter((place) => {\n        if (place.id !== placeId) return place;\n      });\n      if (!updatedPlaces[0]) updatedPlaces = [];\n      setPlaces(() => (updatedPlaces));\n    }\n  };\n\n  //edits a place\n  const editPlace = async (data) => {\n    const placeId = places[currPlace - 1].id;\n    reqPlaces(\"patch\", `/books/${bookId}/places/${placeId}`, \"place\", data);\n  };\n\n  return (\n    <>\n      <img className=\"CharacterBook_Image\" src={noteBook} alt=\"NoteBook\" />\n\n      {currPlace && editForm ? (\n        <PlaceForm\n        closeForm={() => setEditForm(false)}\n        submit={editPlace}\n        place ={places[currPlace - 1]}\n        submitText=\"Edit Place\"\n        />\n      ) : null}\n\n      <div className=\"CharacterBook\">\n        {currPlace ? null : <h3>Table of Contents</h3>}\n\n        {currPlace && places.length > 0 ? (\n          <Place\n            handleClick={() => setEditForm(true)}\n            place={places[currPlace - 1]}\n            deletePlace={deletePlace}\n          />\n        ) : (\n          places.map((place, inx) => (\n            <div className=\"CharLink\" key={place.id}>\n              <button\n                type=\"button\"\n                onClick={() => changePlace(inx + 1)}\n                name=\"button\"\n              >\n                {place.name}\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => deletePlace(place.id)}\n                name=\"button\"\n              >\n                X\n              </button>\n            </div>\n          ))\n        )}\n      </div>\n\n      {addForm ? (\n        <PlaceForm\n        closeForm={() => setAddForm(false)}\n        submit={addPlace}\n        submitText=\"Add Place\"\n        />\n      ) : (\n        <>\n          <button\n            type=\"button\"\n            className=\"CharacterBook_button\"\n            onClick={() => setAddForm(true)}\n            name=\"button\"\n          >\n            New place\n          </button>\n        </>\n      )}\n\n      <div className=\"CharacterBook_Back\" onClick={() => changePlace(-1)}></div>\n      <div className=\"CharacterBook_Next\" onClick={() => changePlace(1)}></div>\n    </>\n  );\n};\nexport default PlaceBook;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}