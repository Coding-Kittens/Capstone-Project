{"ast":null,"code":"import _objectSpread from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import PopUpForm from\"../forms/PopUpForm\";import{useState,useEffect}from\"react\";import{v4 as uuidv4}from'uuid';import bookmark from\"../sprites/bookMark.png\";import useAxios from\"../hooks/useAxios\";import\"../css/CharacterBook.css\";import Tab from\"./Tab\";import\"../css/BookMark.css\";///shows all the bookmarks for a book and lets you add a new one\n//takes:\n//the id of the book you are on\n//the current page id\n//a function to go to a page whe you click on a bookmark that is not on the current page\n//\n// I use the variable name of note because it is shorter\n///and bookmarks are kinda like notes but for one page instead of the book\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BookMark=function BookMark(_ref){var bookId=_ref.bookId,currPageId=_ref.currPageId,changePage=_ref.changePage;var _useAxios=useAxios([],true),_useAxios2=_slicedToArray(_useAxios,3),reqNotes=_useAxios2[0],notes=_useAxios2[1],setNotes=_useAxios2[2];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),addForm=_useState2[0],setAddForm=_useState2[1];//gets all the bookmarks for a book\nuseEffect(function(){reqNotes(\"get\",\"/bookmarks/\".concat(bookId),\"bookmarks\");},[]);//adds a bookmark\nvar addNote=function addNote(data,pageId){reqNotes(\"post\",\"/bookmarks/\".concat(bookId,\"/\").concat(pageId),\"bookmark\",data);};//deletes a bookmark\nvar deleteNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(pageId){var res,updatedNotes;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return reqNotes(\"delete\",\"/bookmarks/\".concat(bookId,\"/\").concat(pageId));case 2:res=_context.sent;if(res.message===\"Deleted!\"){updatedNotes=notes.filter(function(note){if(note.page_id!==pageId)return note;});if(!updatedNotes[0])updatedNotes=[];setNotes(function(){return updatedNotes;});}case 4:case\"end\":return _context.stop();}},_callee);}));return function deleteNote(_x){return _ref2.apply(this,arguments);};}();//edits a bookmark\nvar editNote=function editNote(data,pageId){reqNotes(\"patch\",\"/bookmarks/\".concat(bookId,\"/\").concat(pageId),\"bookmark\",_objectSpread(_objectSpread({},data),{},{page_id:currPageId,book_id:bookId}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{className:\"BookMark_Image\",src:bookmark,alt:\"bookmark\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"BookMark\",children:[notes.length>0&&currPageId?notes.map(function(note){return/*#__PURE__*/_jsx(Tab,{info:note,page_id:currPageId,handleClick:function handleClick(){return changePage(note.page_num);},editTab:editNote,deleteTab:deleteNote},uuidv4());}):null,addForm?/*#__PURE__*/_jsx(PopUpForm,{closeForm:function closeForm(){return setAddForm(false);},submit:function submit(data){return addNote(data,currPageId);},inputs:[{name:\"text\",title:\"Note\"}],initData:{text:\"\"},submitText:\"Add\"}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"BookMark_button\",onClick:function onClick(){return setAddForm(true);},name:\"button\",children:\"New Bookmark\"})})]})]});};export default BookMark;","map":{"version":3,"names":["PopUpForm","useState","useEffect","v4","uuidv4","bookmark","useAxios","Tab","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","BookMark","_ref","bookId","currPageId","changePage","_useAxios","_useAxios2","_slicedToArray","reqNotes","notes","setNotes","_useState","_useState2","addForm","setAddForm","concat","addNote","data","pageId","deleteNote","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","updatedNotes","wrap","_callee$","_context","prev","next","sent","message","filter","note","page_id","stop","_x","apply","arguments","editNote","_objectSpread","book_id","children","className","src","alt","length","map","info","handleClick","page_num","editTab","deleteTab","closeForm","submit","inputs","name","title","initData","text","submitText","type","onClick"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/front/src/books/BookMark.js"],"sourcesContent":["import PopUpForm from \"../forms/PopUpForm\";\nimport { useState, useEffect } from \"react\";\nimport { v4 as uuidv4 } from 'uuid';\nimport bookmark from \"../sprites/bookMark.png\";\nimport useAxios from \"../hooks/useAxios\";\nimport \"../css/CharacterBook.css\";\n\nimport Tab from \"./Tab\";\nimport \"../css/BookMark.css\";\n\n///shows all the bookmarks for a book and lets you add a new one\n//takes:\n//the id of the book you are on\n//the current page id\n//a function to go to a page whe you click on a bookmark that is not on the current page\n//\n// I use the variable name of note because it is shorter\n///and bookmarks are kinda like notes but for one page instead of the book\nconst BookMark = ({ bookId, currPageId, changePage }) => {\n  const [reqNotes, notes, setNotes] = useAxios([], true);\n  const [addForm, setAddForm] = useState(false);\n\n  //gets all the bookmarks for a book\n  useEffect(() => {\n    reqNotes(\"get\", `/bookmarks/${bookId}`, \"bookmarks\");\n  }, []);\n\n  //adds a bookmark\n  const addNote = (data, pageId) => {\n    reqNotes(\"post\", `/bookmarks/${bookId}/${pageId}`, \"bookmark\", data);\n  };\n\n  //deletes a bookmark\n  const deleteNote = async (pageId) => {\n    const res = await reqNotes(\"delete\", `/bookmarks/${bookId}/${pageId}`);\n    if (res.message === \"Deleted!\") {\n      let updatedNotes = notes.filter((note) => {\n        if (note.page_id !== pageId) return note;\n      });\n      if (!updatedNotes[0]) updatedNotes = [];\n      setNotes(() => updatedNotes);\n    }\n  };\n\n  //edits a bookmark\n  const editNote = (data, pageId) => {\n    reqNotes(\"patch\", `/bookmarks/${bookId}/${pageId}`, \"bookmark\", {\n      ...data,\n      page_id: currPageId,\n      book_id: bookId,\n    });\n  };\n\n  return (\n    <>\n      <img className=\"BookMark_Image\" src={bookmark} alt=\"bookmark\" />\n\n      <div className=\"BookMark\">\n        {notes.length > 0 && currPageId\n          ? notes.map((note) => (\n              <Tab\n                key={uuidv4()}\n                info={note}\n                page_id={currPageId}\n                handleClick={() => changePage(note.page_num)}\n                editTab={editNote}\n                deleteTab={deleteNote}\n              />\n            ))\n          : null}\n\n        {addForm ? (\n          <PopUpForm\n            closeForm={() => setAddForm(false)}\n            submit={(data) => addNote(data, currPageId)}\n            inputs={[{ name: \"text\", title: \"Note\" }]}\n            initData={{\n              text: \"\",\n            }}\n            submitText=\"Add\"\n          />\n        ) : (\n          <>\n            <button\n              type=\"button\"\n              className=\"BookMark_button\"\n              onClick={() => setAddForm(true)}\n              name=\"button\"\n            >\n              New Bookmark\n            </button>\n          </>\n        )}\n      </div>\n    </>\n  );\n};\nexport default BookMark;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}