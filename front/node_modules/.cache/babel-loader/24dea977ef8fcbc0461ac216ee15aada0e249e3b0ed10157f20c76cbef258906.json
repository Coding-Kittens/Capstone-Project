{"ast":null,"code":"var _jsxFileName = \"/Users/rosepowell/Desktop/Book_Writing/book_writing/src/notes/NoteBook.js\",\n  _s = $RefreshSig$();\nimport PopUpForm from \"../forms/PopUpForm\";\nimport { useState, useEffect } from \"react\";\nimport useToggle from \"../hooks/useToggle\";\nimport noteBook from \"../sprites/notes1.png\";\nimport axios from \"axios\";\nimport useAxios from \"../hooks/useAxios\";\nimport \"../css/CharacterBook.css\";\nimport NotePage from \"./NotePage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NoteBook = _ref => {\n  _s();\n  let {\n    bookId,\n    username\n  } = _ref;\n  const [reqNotes, notes, setNotes] = useAxios([], true);\n  const [currNote, setCurrNote] = useState(null);\n  const [addForm, setAddForm] = useState(false);\n  const [editForm, setEditForm] = useState(false);\n  const [addExistingForm, setAddExistingForm] = useState(false);\n  useEffect(() => {\n    reqNotes('get', `/books/${bookId}/notes`, 'notes');\n  }, []);\n  const showContents = () => {\n    setCurrNote(null);\n  };\n  const changeNote = num => {\n    let newNote = currNote ? currNote + num : num;\n    if (newNote < 0) newNote = null;\n    if (newNote > notes.length) newNote = 0;\n    setCurrNote(newNote);\n  };\n  const addNote = data => {\n    reqNotes('post', `/books/${bookId}/notes`, 'notes', data);\n  };\n  const deleteNote = async noteId => {\n    const res = await reqNotes('delete', `/books/${bookId}/notes/${noteId}`);\n    if (res.message === \"Deleted!\") {\n      if (currNote) {\n        if (notes[currNote - 1].id === noteId) {\n          changeNote(-1);\n        }\n      }\n      let updatedNotes = notes.filter(note => {\n        if (note.id != noteId) return note;\n      });\n      if (!updatedNotes[0]) updatedNotes = [];\n      setNotes(n => n = updatedNotes);\n    }\n  };\n  const editNote = async data => {\n    const noteId = notes[currNote - 1].id;\n    reqNotes('patch', `/notes/${noteId}`, 'notes', data);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"CharacterBook_Image\",\n      src: noteBook,\n      alt: \"NoteBook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), editForm ? /*#__PURE__*/_jsxDEV(PopUpForm, {\n      closeForm: () => setEditForm(false),\n      submit: editNote,\n      inputs: [{\n        title: \"Title\",\n        name: \"title\"\n      }, {\n        title: \"Text\",\n        name: \"text\"\n      }],\n      initData: {\n        title: \"\",\n        text: \"\"\n      },\n      submitText: \"Edit Note\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CharacterBook\",\n      children: [currNote ? null : /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Table of Contents\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 28\n      }, this), currNote && notes.length > 0 ? /*#__PURE__*/_jsxDEV(NotePage, {\n        handleClick: () => setEditForm(true),\n        note: notes[currNote - 1],\n        deleteNote: deleteNote\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this) : notes.map((note, inx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"CharLink\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => changeNote(inx + 1),\n          name: \"button\",\n          children: note.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => deleteNote(note.id),\n          name: \"button\",\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this)]\n      }, note.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), addForm ? /*#__PURE__*/_jsxDEV(PopUpForm, {\n      closeForm: () => setAddForm(false),\n      submit: addNote,\n      inputs: [{\n        title: \"Title\",\n        name: \"title\"\n      }, {\n        title: \"Text\",\n        name: \"text\"\n      }],\n      initData: {\n        title: \"\",\n        text: \"\"\n      },\n      submitText: \"Add Note\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"CharacterBook_button\",\n        onClick: () => setAddForm(true),\n        name: \"button\",\n        children: \"New note\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CharacterBook_Back\",\n      onClick: () => changeNote(-1)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"CharacterBook_Next\",\n      onClick: () => changeNote(1)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(NoteBook, \"ZQlzK3WuHL6dnCmrNDWPNi/wsXU=\", false, function () {\n  return [useAxios];\n});\n_c = NoteBook;\nexport default NoteBook;\nvar _c;\n$RefreshReg$(_c, \"NoteBook\");","map":{"version":3,"names":["PopUpForm","useState","useEffect","useToggle","noteBook","axios","useAxios","NotePage","NoteBook","bookId","username","reqNotes","notes","setNotes","currNote","setCurrNote","addForm","setAddForm","editForm","setEditForm","addExistingForm","setAddExistingForm","showContents","changeNote","num","newNote","length","addNote","data","deleteNote","noteId","res","message","id","updatedNotes","filter","note","n","editNote","title","name","text","map","inx"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/notes/NoteBook.js"],"sourcesContent":["import PopUpForm from \"../forms/PopUpForm\";\nimport { useState, useEffect } from \"react\";\nimport useToggle from \"../hooks/useToggle\";\nimport noteBook from \"../sprites/notes1.png\";\n\nimport axios from \"axios\";\n\nimport useAxios from \"../hooks/useAxios\";\nimport \"../css/CharacterBook.css\";\nimport NotePage from \"./NotePage\";\n\nconst NoteBook = ({ bookId, username }) => {\n  const [reqNotes,notes, setNotes] = useAxios([],true);\n  const [currNote, setCurrNote] = useState(null);\n  const [addForm, setAddForm] = useState(false);\n  const [editForm, setEditForm] = useState(false);\n  const [addExistingForm, setAddExistingForm] = useState(false);\n\n  useEffect(() => {\n    reqNotes('get',`/books/${bookId}/notes`,'notes');\n  }, []);\n\n  const showContents = () => {\n    setCurrNote(null);\n  };\n\n  const changeNote = (num) => {\n    let newNote = currNote ? currNote + num : num;\n    if (newNote < 0) newNote = null;\n    if (newNote > notes.length) newNote = 0;\n    setCurrNote(newNote);\n  };\n\n  const addNote =(data) => {\n    reqNotes('post',`/books/${bookId}/notes`,'notes',data);\n  };\n\n  const deleteNote = async (noteId) => {\n    const res = await reqNotes('delete',`/books/${bookId}/notes/${noteId}`);\n    if (res.message  === \"Deleted!\") {\n      if (currNote) {\n        if (notes[currNote-1].id === noteId) {\n          changeNote(-1);\n        }\n      }\n      let updatedNotes = notes.filter((note) => {\n        if (note.id != noteId) return note;\n      });\n      if (!updatedNotes[0]) updatedNotes = [];\n      setNotes((n) => (n = updatedNotes));\n    }\n  };\n\n  const editNote = async (data) => {\n    const noteId = notes[currNote-1].id;\n    reqNotes('patch',`/notes/${noteId}`,'notes',data);\n  };\n\n  return (\n    <>\n      <img className=\"CharacterBook_Image\" src={noteBook} alt=\"NoteBook\" />\n\n      {editForm ? (\n        <PopUpForm\n          closeForm={() => setEditForm(false)}\n          submit={editNote}\n          inputs={[\n            { title: \"Title\", name: \"title\" },\n            { title: \"Text\", name: \"text\" },\n          ]}\n          initData={{\n            title: \"\",\n            text: \"\",\n          }}\n          submitText=\"Edit Note\"\n        />\n      ) : null}\n\n      <div className=\"CharacterBook\">\n        {currNote ? null : <h3>Table of Contents</h3>}\n\n        {currNote && notes.length > 0 ? (\n          <NotePage\n            handleClick={() => setEditForm(true)}\n            note={notes[currNote-1]}\n            deleteNote={deleteNote}\n          />\n        ) : (\n          notes.map((note, inx) => (\n            <div className=\"CharLink\" key={note.id}>\n              <button\n                type=\"button\"\n                onClick={() => changeNote(inx+1)}\n                name=\"button\"\n              >\n                {note.title}\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => deleteNote(note.id)}\n                name=\"button\"\n              >\n                X\n              </button>\n            </div>\n          ))\n        )}\n      </div>\n\n      {addForm ? (\n        <PopUpForm\n          closeForm={() => setAddForm(false)}\n          submit={addNote}\n          inputs={[\n            { title: \"Title\", name: \"title\" },\n            { title: \"Text\", name: \"text\" },\n          ]}\n          initData={{\n            title: \"\",\n            text: \"\",\n          }}\n          submitText=\"Add Note\"\n        />\n      ) : (\n        <>\n          <button\n            type=\"button\"\n            className=\"CharacterBook_button\"\n            onClick={() => setAddForm(true)}\n            name=\"button\"\n          >\n            New note\n          </button>\n        </>\n      )}\n\n\n      <div className ='CharacterBook_Back' onClick ={()=>changeNote(-1)}></div>\n      <div className ='CharacterBook_Next' onClick ={()=>changeNote(1)}></div>\n    </>\n  );\n};\nexport default NoteBook;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}