{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import PopUpForm from\"../forms/PopUpForm\";import{useState,useEffect}from\"react\";import useToggle from\"../hooks/useToggle\";import noteBook from\"../sprites/notes1.png\";import useAxios from\"../hooks/useAxios\";import\"../css/CharacterBook.css\";import NotePage from\"./NotePage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NoteBook=function NoteBook(_ref){var bookId=_ref.bookId,username=_ref.username;var _useAxios=useAxios([],true),_useAxios2=_slicedToArray(_useAxios,3),reqNotes=_useAxios2[0],notes=_useAxios2[1],setNotes=_useAxios2[2];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currNote=_useState2[0],setCurrNote=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),addForm=_useState4[0],setAddForm=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),editForm=_useState6[0],setEditForm=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),addExistingForm=_useState8[0],setAddExistingForm=_useState8[1];useEffect(function(){reqNotes('get',\"/books/\".concat(bookId,\"/notes\"),'notes');},[]);var showContents=function showContents(){setCurrNote(null);};var changeNote=function changeNote(num){var newNote=currNote?currNote+num:num;if(newNote<0)newNote=null;if(newNote>notes.length)newNote=0;setCurrNote(newNote);};var addNote=function addNote(data){reqNotes('post',\"/books/\".concat(bookId,\"/notes\"),'note',data);};var deleteNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(noteId){var res,updatedNotes;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return reqNotes('delete',\"/books/\".concat(bookId,\"/notes/\").concat(noteId));case 2:res=_context.sent;if(res.message===\"Deleted!\"){if(currNote){if(notes[currNote-1].id===noteId){changeNote(-1);}}updatedNotes=notes.filter(function(note){if(note.id!=noteId)return note;});if(!updatedNotes[0])updatedNotes=[];setNotes(function(n){return n=updatedNotes;});}case 4:case\"end\":return _context.stop();}}},_callee);}));return function deleteNote(_x){return _ref2.apply(this,arguments);};}();var editNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var noteId;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:noteId=notes[currNote-1].id;reqNotes('patch',\"/notes/\".concat(noteId),'note',data);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function editNote(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{className:\"CharacterBook_Image\",src:noteBook,alt:\"NoteBook\"}),currNote&&editForm?/*#__PURE__*/_jsx(PopUpForm,{closeForm:function closeForm(){return setEditForm(false);},submit:editNote,inputs:[{title:\"Title\",name:\"title\"},{title:\"Text\",name:\"text\"}],initData:{title:notes[currNote-1].title,text:notes[currNote-1].text},submitText:\"Edit Note\"}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"CharacterBook\",children:[currNote?null:/*#__PURE__*/_jsx(\"h3\",{children:\"Table of Contents\"}),currNote&&notes.length>0?/*#__PURE__*/_jsx(NotePage,{handleClick:function handleClick(){return setEditForm(true);},note:notes[currNote-1],deleteNote:deleteNote}):notes.map(function(note,inx){return/*#__PURE__*/_jsxs(\"div\",{className:\"CharLink\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return changeNote(inx+1);},name:\"button\",children:note.title}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return deleteNote(note.id);},name:\"button\",children:\"X\"})]},note.id);})]}),addForm?/*#__PURE__*/_jsx(PopUpForm,{closeForm:function closeForm(){return setAddForm(false);},submit:addNote,inputs:[{title:\"Title\",name:\"title\"},{title:\"Text\",name:\"text\"}],initData:{title:\"\",text:\"\"},submitText:\"Add Note\"}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"CharacterBook_button\",onClick:function onClick(){return setAddForm(true);},name:\"button\",children:\"New note\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"CharacterBook_Back\",onClick:function onClick(){return changeNote(-1);}}),/*#__PURE__*/_jsx(\"div\",{className:\"CharacterBook_Next\",onClick:function onClick(){return changeNote(1);}})]});};export default NoteBook;","map":{"version":3,"names":["PopUpForm","useState","useEffect","useToggle","noteBook","useAxios","NotePage","NoteBook","bookId","username","reqNotes","notes","setNotes","currNote","setCurrNote","addForm","setAddForm","editForm","setEditForm","addExistingForm","setAddExistingForm","showContents","changeNote","num","newNote","length","addNote","data","deleteNote","noteId","res","message","id","updatedNotes","filter","note","n","editNote","title","name","text","map","inx"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/notes/NoteBook.js"],"sourcesContent":["import PopUpForm from \"../forms/PopUpForm\";\nimport { useState, useEffect } from \"react\";\nimport useToggle from \"../hooks/useToggle\";\nimport noteBook from \"../sprites/notes1.png\";\nimport useAxios from \"../hooks/useAxios\";\nimport \"../css/CharacterBook.css\";\nimport NotePage from \"./NotePage\";\n\nconst NoteBook = ({ bookId, username }) => {\n  const [reqNotes,notes, setNotes] = useAxios([],true);\n  const [currNote, setCurrNote] = useState(null);\n  const [addForm, setAddForm] = useState(false);\n  const [editForm, setEditForm] = useState(false);\n  const [addExistingForm, setAddExistingForm] = useState(false);\n\n  useEffect(() => {\n    reqNotes('get',`/books/${bookId}/notes`,'notes');\n  }, []);\n\n  const showContents = () => {\n    setCurrNote(null);\n  };\n\n  const changeNote = (num) => {\n    let newNote = currNote ? currNote + num : num;\n    if (newNote < 0) newNote = null;\n    if (newNote > notes.length) newNote = 0;\n    setCurrNote(newNote);\n  };\n\n  const addNote =(data) => {\n    reqNotes('post',`/books/${bookId}/notes`,'note',data);\n  };\n\n  const deleteNote = async (noteId) => {\n    const res = await reqNotes('delete',`/books/${bookId}/notes/${noteId}`);\n    if (res.message  === \"Deleted!\") {\n      if (currNote) {\n        if (notes[currNote-1].id === noteId) {\n          changeNote(-1);\n        }\n      }\n      let updatedNotes = notes.filter((note) => {\n        if (note.id != noteId) return note;\n      });\n      if (!updatedNotes[0]) updatedNotes = [];\n      setNotes((n) => (n = updatedNotes));\n    }\n  };\n\n  const editNote = async (data) => {\n    const noteId = notes[currNote-1].id;\n    reqNotes('patch',`/notes/${noteId}`,'note',data);\n  };\n\n  return (\n    <>\n      <img className=\"CharacterBook_Image\" src={noteBook} alt=\"NoteBook\" />\n\n      {currNote && editForm ? (\n        <PopUpForm\n          closeForm={() => setEditForm(false)}\n          submit={editNote}\n          inputs={[\n            { title: \"Title\", name: \"title\" },\n            { title: \"Text\", name: \"text\" },\n          ]}\n          initData={{\n            title: notes[currNote-1].title,\n            text: notes[currNote-1].text,\n          }}\n          submitText=\"Edit Note\"\n        />\n      ) : null}\n\n      <div className=\"CharacterBook\">\n        {currNote ? null : <h3>Table of Contents</h3>}\n\n        {currNote && notes.length > 0 ? (\n          <NotePage\n            handleClick={() => setEditForm(true)}\n            note={notes[currNote-1]}\n            deleteNote={deleteNote}\n          />\n        ) : (\n          notes.map((note, inx) => (\n            <div className=\"CharLink\" key={note.id}>\n              <button\n                type=\"button\"\n                onClick={() => changeNote(inx+1)}\n                name=\"button\"\n              >\n                {note.title}\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => deleteNote(note.id)}\n                name=\"button\"\n              >\n                X\n              </button>\n            </div>\n          ))\n        )}\n      </div>\n\n      {addForm ? (\n        <PopUpForm\n          closeForm={() => setAddForm(false)}\n          submit={addNote}\n          inputs={[\n            { title: \"Title\", name: \"title\" },\n            { title: \"Text\", name: \"text\" },\n          ]}\n          initData={{\n            title: \"\",\n            text: \"\",\n          }}\n          submitText=\"Add Note\"\n        />\n      ) : (\n        <>\n          <button\n            type=\"button\"\n            className=\"CharacterBook_button\"\n            onClick={() => setAddForm(true)}\n            name=\"button\"\n          >\n            New note\n          </button>\n        </>\n      )}\n\n\n      <div className ='CharacterBook_Back' onClick ={()=>changeNote(-1)}></div>\n      <div className ='CharacterBook_Next' onClick ={()=>changeNote(1)}></div>\n    </>\n  );\n};\nexport default NoteBook;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}