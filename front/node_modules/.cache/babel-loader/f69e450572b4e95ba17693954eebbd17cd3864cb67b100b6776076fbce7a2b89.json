{"ast":null,"code":"var _jsxFileName = \"/Users/rosepowell/Desktop/Book_Writing/book_writing/src/Library.js\",\n  _s = $RefreshSig$();\nimport { useParams } from \"react-router-dom\";\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport NewLibraryBook from './forms/NewLibraryBook';\nimport LibraryBook from './LibraryBook';\nimport Card from './Card';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Library = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const [books, setBooks] = useState();\n  const [library, setLibrary] = useState();\n  const [addForm, setAddForm] = useState(false);\n  useEffect(() => {\n    const getBooks = async () => {\n      const res = await axios.get(`/libraries/${id}/books`, {\n        credentials: 'include'\n      });\n      const libraryRes = await axios.get(`/libraries/${id}`, {\n        credentials: 'include'\n      });\n      if (res.data.books) {\n        setBooks(n => n = res.data.books);\n      }\n      if (libraryRes.data.library) {\n        setLibrary(n => n = libraryRes.data.library);\n      }\n    };\n    getBooks();\n  }, []);\n  const addBook = async data => {\n    console.log('form data', data);\n    const bookIds = Object.keys(data);\n    const res = await axios.post(`/users/${library.username}/libraries/books`, {\n      credentials: 'include',\n      libraries: [id],\n      books: [bookIds]\n    });\n    console.log(res);\n    setAddForm(false);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [library ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Library\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: library.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [library.description, \", this library is \", library.is_public ? 'public' : \"not public\", \". \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }, this) : null, books ? /*#__PURE__*/_jsxDEV(\"ol\", {\n      children: books.map(book => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(LibraryBook, {\n          book: book\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 28\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 24\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 3\n    }, this) : null, /*#__PURE__*/_jsxDEV(Card, {\n      title: \"Add book\",\n      handleClick: () => setAddForm(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 1\n    }, this), addForm ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Library_Add_Book\",\n      children: [/*#__PURE__*/_jsxDEV(NewLibraryBook, {\n        addBook: addBook,\n        username: library.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setAddForm(false),\n        name: \"button\",\n        children: \"Cancle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 3\n    }, this) : null]\n  }, void 0, true);\n};\n_s(Library, \"lzhkohOzphManLXrusoZngo2jSQ=\", false, function () {\n  return [useParams];\n});\n_c = Library;\nexport default Library;\nvar _c;\n$RefreshReg$(_c, \"Library\");","map":{"version":3,"names":["useParams","useState","useEffect","axios","NewLibraryBook","LibraryBook","Card","Library","id","books","setBooks","library","setLibrary","addForm","setAddForm","getBooks","res","get","credentials","libraryRes","data","n","addBook","console","log","bookIds","Object","keys","post","username","libraries","name","description","is_public","map","book"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/Library.js"],"sourcesContent":["import { useParams } from \"react-router-dom\";\nimport {useState,useEffect} from 'react';\nimport axios from 'axios';\nimport NewLibraryBook from './forms/NewLibraryBook';\nimport LibraryBook from './LibraryBook';\nimport Card from './Card';\nconst Library =()=>{\nconst { id } = useParams();\n\nconst [books,setBooks] = useState();\nconst [library,setLibrary] = useState();\nconst [addForm,setAddForm] = useState(false);\n\n\nuseEffect(()=>{\nconst getBooks = async()=>{\n  const res = await axios.get(`/libraries/${id}/books`,{credentials: 'include'});\n  const libraryRes = await axios.get(`/libraries/${id}`,{credentials: 'include'});\n  if(res.data.books){\n    setBooks((n)=> n= res.data.books);\n  }\n  if(libraryRes.data.library){\n    setLibrary((n)=> n=libraryRes.data.library);\n  }\n}\ngetBooks();\n},[])\n\n\nconst addBook=async(data)=>{\nconsole.log('form data',data);\nconst bookIds = Object.keys(data)\nconst res = await axios.post(`/users/${library.username}/libraries/books`,{credentials: 'include',libraries:[id],books:[bookIds]});\nconsole.log(res);\nsetAddForm(false)\n}\n\n\n\n  return<>\n  {library?\n    <div className='Library'>\n    <h1>{library.name}</h1>\n  <p>{library.description}, this library is {library.is_public? 'public': \"not public\"}. </p>\n  </div>\n  :\n  null\n}\n{books?\n  <ol>\n    {books.map(book => <li><LibraryBook book={book}/></li>)}\n  </ol>\n:\nnull\n}\n\n<Card title='Add book' handleClick={()=>setAddForm(true)}/>\n\n{\n  addForm?\n  <div className='Library_Add_Book'>\n  <NewLibraryBook addBook={addBook} username={library.username}/>\n  <button type=\"button\" onClick={()=>setAddForm(false)} name=\"button\">Cancle</button>\n  </div>\n  :null\n}\n\n\n  </>\n}\nexport default Library;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}