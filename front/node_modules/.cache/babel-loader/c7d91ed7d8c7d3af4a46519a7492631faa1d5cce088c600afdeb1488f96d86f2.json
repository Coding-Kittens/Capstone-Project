{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useParams}from\"react-router-dom\";import{useEffect}from\"react\";import useAxios from\"../hooks/useAxios\";import LibraryBook from\"../libraries/LibraryBook\";//shows all the users books\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserBooks=function UserBooks(){var _useParams=useParams(),username=_useParams.username;var _useAxios=useAxios(null),_useAxios2=_slicedToArray(_useAxios,3),reqBooks=_useAxios2[0],books=_useAxios2[1],setBooks=_useAxios2[2];//gets all the users books\nuseEffect(function(){reqBooks(\"get\",\"/users/\".concat(username,\"/books\"),\"books\");},[]);//deletes a book\nvar deleteBook=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(bookId){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return reqBooks(\"delete\",\"/users/\".concat(username,\"/books/\").concat(bookId));case 2:res=_context.sent;console.log(res);if(res.message===\"Deleted!\")setBooks(function(){return books.filter(function(book){return book.id!=bookId;});});case 5:case\"end\":return _context.stop();}},_callee);}));return function deleteBook(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"ListPage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\".concat(username,\"'s Books\")}),books?books.map(function(book){return/*#__PURE__*/_jsx(LibraryBook,{book:book,deleteBook:deleteBook,btnText:\"X\"},book.id);}):null]});};export default UserBooks;","map":{"version":3,"names":["useParams","useEffect","useAxios","LibraryBook","jsx","_jsx","jsxs","_jsxs","UserBooks","_useParams","username","_useAxios","_useAxios2","_slicedToArray","reqBooks","books","setBooks","concat","deleteBook","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","bookId","res","wrap","_callee$","_context","prev","next","sent","console","log","message","filter","book","id","stop","_x","apply","arguments","className","children","map","btnText"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/front/src/pages/UserBooks.js"],"sourcesContent":["import { useParams } from \"react-router-dom\";\nimport { useEffect } from \"react\";\nimport useAxios from \"../hooks/useAxios\";\nimport LibraryBook from \"../libraries/LibraryBook\";\n\n//shows all the users books\nconst UserBooks = () => {\n  const { username } = useParams();\n\n  const [reqBooks, books, setBooks] = useAxios(null);\n\n  //gets all the users books\n  useEffect(() => {\n    reqBooks(\"get\", `/users/${username}/books`, \"books\");\n  }, []);\n\n  //deletes a book\n  const deleteBook = async (bookId) => {\n    const res = await reqBooks(\"delete\", `/users/${username}/books/${bookId}`);\n    console.log(res);\n    if (res.message === \"Deleted!\")\n      setBooks(() => books.filter((book) => book.id != bookId));\n  };\n\n  return (\n    <div className=\"ListPage\">\n      <h1>{`${username}'s Books`}</h1>\n      {books\n        ? books.map((book) => (\n            <LibraryBook\n              key={book.id}\n              book={book}\n              deleteBook={deleteBook}\n              btnText=\"X\"\n            />\n          ))\n        : null}\n    </div>\n  );\n};\nexport default UserBooks;\n"],"mappings":"6bAAA,OAASA,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,SAAS,KAAQ,OAAO,CACjC,MAAO,CAAAC,QAAQ,KAAM,mBAAmB,CACxC,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAElD;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACA,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CACtB,IAAAC,UAAA,CAAqBT,SAAS,EAAE,CAAxBU,QAAQ,CAAAD,UAAA,CAARC,QAAQ,CAEhB,IAAAC,SAAA,CAAoCT,QAAQ,CAAC,IAAI,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA3CG,QAAQ,CAAAF,UAAA,IAAEG,KAAK,CAAAH,UAAA,IAAEI,QAAQ,CAAAJ,UAAA,IAEhC;AACAX,SAAS,CAAC,UAAM,CACda,QAAQ,CAAC,KAAK,WAAAG,MAAA,CAAYP,QAAQ,WAAU,OAAO,CAAC,CACtD,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,GAAM,CAAAQ,UAAU,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,MAAM,MAAAC,GAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACZ,CAAAhB,QAAQ,CAAC,QAAQ,WAAAG,MAAA,CAAYP,QAAQ,YAAAO,MAAA,CAAUO,MAAM,EAAG,QAApEC,GAAG,CAAAG,QAAA,CAAAG,IAAA,CACTC,OAAO,CAACC,GAAG,CAACR,GAAG,CAAC,CAChB,GAAIA,GAAG,CAACS,OAAO,GAAK,UAAU,CAC5BlB,QAAQ,CAAC,iBAAM,CAAAD,KAAK,CAACoB,MAAM,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,CAACC,EAAE,EAAIb,MAAM,GAAC,GAAC,CAAC,wBAAAI,QAAA,CAAAU,IAAA,MAAAf,OAAA,GAC7D,kBALK,CAAAL,UAAUA,CAAAqB,EAAA,SAAApB,IAAA,CAAAqB,KAAA,MAAAC,SAAA,OAKf,CAED,mBACElC,KAAA,QAAKmC,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBtC,IAAA,OAAAsC,QAAA,IAAA1B,MAAA,CAAQP,QAAQ,cAAgB,CAC/BK,KAAK,CACFA,KAAK,CAAC6B,GAAG,CAAC,SAACR,IAAI,qBACb/B,IAAA,CAACF,WAAW,EAEViC,IAAI,CAAEA,IAAK,CACXlB,UAAU,CAAEA,UAAW,CACvB2B,OAAO,CAAC,GAAG,EAHNT,IAAI,CAACC,EAAE,CAIZ,EACH,CAAC,CACF,IAAI,GACJ,CAEV,CAAC,CACD,cAAe,CAAA7B,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}