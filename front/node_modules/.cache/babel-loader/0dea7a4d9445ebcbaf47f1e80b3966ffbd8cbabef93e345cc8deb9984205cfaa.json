{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useNavigate}from\"react-router-dom\";import{useState,useEffect,useContext}from\"react\";import useAxios from\"../hooks/useAxios\";import{UserContext}from\"../context/context\";import Card from\"../pieces/Card\";import NewLibraryBook from\"../forms/NewLibraryBook\";import'../css/Search.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(_ref){var title=_ref.title,_ref$searchFor=_ref.searchFor,searchFor=_ref$searchFor===void 0?0:_ref$searchFor;var currentUser=useContext(UserContext);var navigate=useNavigate();var _useAxios=useAxios([]),_useAxios2=_slicedToArray(_useAxios,3),reqLibraries=_useAxios2[0],libraries=_useAxios2[1],setLibraries=_useAxios2[2];var _useAxios3=useAxios([]),_useAxios4=_slicedToArray(_useAxios3,3),reqBooks=_useAxios4[0],books=_useAxios4[1],setBooks=_useAxios4[2];var _useAxios5=useAxios([]),_useAxios6=_slicedToArray(_useAxios5,3),reqUsers=_useAxios6[0],users=_useAxios6[1],setUsers=_useAxios6[2];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),addForm=_useState2[0],setAddForm=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),bookId=_useState4[0],setBookId=_useState4[1];var username=null;if(currentUser)username=currentUser.username;useEffect(function(){if(searchFor===0||searchFor===2){reqBooks(\"get\",\"/books\",\"books\");}if(searchFor>0&&searchFor<3){reqLibraries(\"get\",\"/libraries/public/0\",\"libraries\");}if(searchFor>=3){reqUsers('get','/users','users');}},[]);var addBook=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return reqBooks(\"post\",\"/users/\".concat(username,\"/libraries/books\"),\"\",{libraries:Object.keys(data.libraries),books:[data.bookId]});case 2:res=_context.sent;setAddForm(function(n){return n=false;});case 4:case\"end\":return _context.stop();}}},_callee);}));return function addBook(_x){return _ref2.apply(this,arguments);};}();var handleClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setBookId(function(n){return n=id;});setAddForm(function(n){return n=true;});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handleClick(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"ListPage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:title}),users.length>0?users.map(function(user){return/*#__PURE__*/_jsx(Card,{title:user.username,texts:[user.name],handleClick:function handleClick(){return navigate(\"/user/\".concat(user.username));}},user.username);}):null,libraries.length>0?libraries.map(function(library){return/*#__PURE__*/_jsx(Card,{title:library.name,texts:[library.description,\"\".concat(library.is_public?\"public\":\"private\")],handleClick:function handleClick(){return navigate(\"/library/\".concat(library.id));}},library.id);}):null,books.length>0?books.map(function(book){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card,{title:book.title,texts:[book.synopsys,\"\".concat(book.is_public?\"public\":\"private\")],handleClick:function handleClick(){return navigate(\"/book/\".concat(book.id));}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleClick(book.id);},name:\"button\",children:\"Add To Library\"},book.id),addForm&&username?/*#__PURE__*/_jsxs(\"div\",{className:\"Library_Add_Book\",children:[/*#__PURE__*/_jsx(NewLibraryBook,{bookId:bookId,addBook:addBook,username:username,title:\"name\",isBooks:false,msg:\"No Libraries to add to!\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return setAddForm(false);},name:\"button\",children:\"Cancle\"})]}):null]},book.id);}):null]});};export default Search;","map":{"version":3,"names":["useNavigate","useState","useEffect","useContext","useAxios","UserContext","Card","NewLibraryBook","Search","title","searchFor","currentUser","navigate","reqLibraries","libraries","setLibraries","reqBooks","books","setBooks","reqUsers","users","setUsers","addForm","setAddForm","bookId","setBookId","username","addBook","data","Object","keys","res","n","handleClick","id","length","map","user","name","library","description","is_public","book","synopsys"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/pages/Search.js"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\nimport { useState, useEffect, useContext } from \"react\";\nimport useAxios from \"../hooks/useAxios\";\nimport { UserContext } from \"../context/context\";\nimport Card from \"../pieces/Card\";\nimport NewLibraryBook from \"../forms/NewLibraryBook\";\nimport '../css/Search.css';\n\nconst Search = ({ title, searchFor = 0 }) => {\n  const currentUser = useContext(UserContext);\n\n  const navigate = useNavigate();\n  const [reqLibraries, libraries, setLibraries] = useAxios([]);\n  const [reqBooks, books, setBooks] = useAxios([]);\n  const [reqUsers, users, setUsers] = useAxios([]);\n  const [addForm, setAddForm] = useState(false);\n  const [bookId, setBookId] = useState(null);\n\n\n\n  let username = null;\n  if (currentUser) username = currentUser.username;\n\n  useEffect(() => {\n    if (searchFor === 0 || searchFor === 2) {\n      reqBooks(\"get\", \"/books\", \"books\");\n    }\n    if (searchFor > 0 && searchFor < 3) {\n      reqLibraries(\"get\", \"/libraries/public/0\", \"libraries\");\n    }\n    if(searchFor >= 3){\n      reqUsers('get','/users','users');\n    }\n\n  }, []);\n\n  const addBook = async (data) => {\n    const res = await reqBooks(\n      \"post\",\n      `/users/${username}/libraries/books`,\n      \"\",\n      { libraries: Object.keys(data.libraries), books: [data.bookId] }\n    );\n    setAddForm((n) => (n = false));\n  };\n\n  const handleClick = async (id) => {\n    setBookId((n) => (n = id));\n    setAddForm((n) => (n = true));\n  };\n\n  return (\n    <div className='ListPage'>\n    <h1>{title}</h1>\n    {users.length > 0\n      ? users.map((user) => (\n          <Card\n            key={user.username}\n            title={user.username}\n            texts={[user.name]}\n            handleClick={() => navigate(`/user/${user.username}`)}\n          />\n        ))\n      : null}\n\n\n      {libraries.length > 0\n        ? libraries.map((library) => (\n            <Card\n              key={library.id}\n              title={library.name}\n              texts={[\n                library.description,\n                `${library.is_public ? \"public\" : \"private\"}`,\n              ]}\n              handleClick={() => navigate(`/library/${library.id}`)}\n            />\n          ))\n        : null}\n      {books.length > 0\n        ? books.map((book) => (\n            <div key={book.id}>\n              <Card\n                title={book.title}\n                texts={[\n                  book.synopsys,\n                  `${book.is_public ? \"public\" : \"private\"}`,\n                ]}\n                handleClick={() => navigate(`/book/${book.id}`)}\n              />\n              <button\n                key={book.id}\n                type=\"button\"\n                onClick={() => handleClick(book.id)}\n                name=\"button\"\n              >\n                Add To Library\n              </button>\n              {addForm && username ? (\n                <div className=\"Library_Add_Book\">\n                  <NewLibraryBook\n                    bookId={bookId}\n                    addBook={addBook}\n                    username={username}\n                    title=\"name\"\n                    isBooks={false}\n                    msg=\"No Libraries to add to!\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setAddForm(false)}\n                    name=\"button\"\n                  >\n                    Cancle\n                  </button>\n                </div>\n              ) : null}\n            </div>\n          ))\n        : null}\n    </div>\n  );\n};\nexport default Search;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}