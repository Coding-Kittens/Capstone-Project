{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rosepowell/Desktop/Book_Writing/book_writing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useParams,useNavigate}from\"react-router-dom\";import{useState,useEffect,useContext}from\"react\";import useAxios from\"../hooks/useAxios\";import LibraryBook from'../libraries/LibraryBook';import Card from\"../pieces/Card\";import{UserContext}from\"../context/context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserBooks=function UserBooks(){var currentUser=useContext(UserContext);var navigate=useNavigate();var _useParams=useParams(),username=_useParams.username;var _useAxios=useAxios(null),_useAxios2=_slicedToArray(_useAxios,3),reqBooks=_useAxios2[0],books=_useAxios2[1],setBooks=_useAxios2[2];useEffect(function(){reqBooks(\"get\",\"/users/\".concat(username,\"/books\"),\"books\");},[]);var deleteBook=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(bookId){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return reqBooks('delete',\"/users/\".concat(username,\"/books/\").concat(bookId));case 2:res=_context.sent;console.log(res);if(res.message==='Deleted!')setBooks(function(n){return n=books.filter(function(book){return book.id!=bookId;});});case 5:case\"end\":return _context.stop();}}},_callee);}));return function deleteBook(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"ListPage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\".concat(username,\"'s Books\")}),books?books.map(function(book){return/*#__PURE__*/_jsx(LibraryBook,{book:book,deleteBook:deleteBook,btnText:\"X\"});}):null]});};export default UserBooks;","map":{"version":3,"names":["useParams","useNavigate","useState","useEffect","useContext","useAxios","LibraryBook","Card","UserContext","UserBooks","currentUser","navigate","username","reqBooks","books","setBooks","deleteBook","bookId","res","console","log","message","n","filter","book","id","map"],"sources":["/Users/rosepowell/Desktop/Book_Writing/book_writing/src/pages/UserBooks.js"],"sourcesContent":["import { useParams, useNavigate } from \"react-router-dom\";\nimport { useState, useEffect, useContext } from \"react\";\nimport useAxios from \"../hooks/useAxios\";\nimport LibraryBook from '../libraries/LibraryBook';\nimport Card from \"../pieces/Card\";\nimport { UserContext } from \"../context/context\";\n\nconst UserBooks = () => {\n  const currentUser = useContext(UserContext);\n  const navigate = useNavigate();\n  const { username } = useParams();\n\n  const [reqBooks, books, setBooks] = useAxios(null);\n\n  useEffect(() => {\n    reqBooks(\"get\", `/users/${username}/books`, \"books\");\n  }, []);\n\n\n\n  const deleteBook=async(bookId)=>{\n  const res = await reqBooks('delete',`/users/${username}/books/${bookId}`);\n  console.log(res);\n  if(res.message === 'Deleted!')setBooks((n)=>n= books.filter(book=> book.id !=bookId));\n  }\n\n\n  return (\n    <div className='ListPage'>\n      <h1>{`${username}'s Books`}</h1>\n      {books\n        ? books.map((book) => (\n            <LibraryBook book={book} deleteBook={deleteBook} btnText='X'/>\n          ))\n        : null}\n    </div>\n  );\n};\nexport default UserBooks;\n"],"mappings":"2aAAA,OAASA,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CACvD,MAAOC,SAAQ,KAAM,mBAAmB,CACxC,MAAOC,YAAW,KAAM,0BAA0B,CAClD,MAAOC,KAAI,KAAM,gBAAgB,CACjC,OAASC,WAAW,KAAQ,oBAAoB,CAAC,wFAEjD,GAAMC,UAAS,CAAG,QAAZA,UAAS,EAAS,CACtB,GAAMC,YAAW,CAAGN,UAAU,CAACI,WAAW,CAAC,CAC3C,GAAMG,SAAQ,CAAGV,WAAW,EAAE,CAC9B,eAAqBD,SAAS,EAAE,CAAxBY,QAAQ,YAARA,QAAQ,CAEhB,cAAoCP,QAAQ,CAAC,IAAI,CAAC,wCAA3CQ,QAAQ,eAAEC,KAAK,eAAEC,QAAQ,eAEhCZ,SAAS,CAAC,UAAM,CACdU,QAAQ,CAAC,KAAK,kBAAYD,QAAQ,WAAU,OAAO,CAAC,CACtD,CAAC,CAAE,EAAE,CAAC,CAIN,GAAMI,WAAU,4FAAC,iBAAMC,MAAM,kJACXJ,SAAQ,CAAC,QAAQ,kBAAWD,QAAQ,mBAAUK,MAAM,EAAG,QAAnEC,GAAG,eACTC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChB,GAAGA,GAAG,CAACG,OAAO,GAAK,UAAU,CAACN,QAAQ,CAAC,SAACO,CAAC,QAAGA,EAAC,CAAER,KAAK,CAACS,MAAM,CAAC,SAAAC,IAAI,QAAGA,KAAI,CAACC,EAAE,EAAGR,MAAM,GAAC,GAAC,CAAC,sDACrF,kBAJKD,WAAU,4CAIf,CAGD,mBACE,aAAK,SAAS,CAAC,UAAU,wBACvB,8BAAQJ,QAAQ,cAAgB,CAC/BE,KAAK,CACFA,KAAK,CAACY,GAAG,CAAC,SAACF,IAAI,qBACb,KAAC,WAAW,EAAC,IAAI,CAAEA,IAAK,CAAC,UAAU,CAAER,UAAW,CAAC,OAAO,CAAC,GAAG,EAAE,EAC/D,CAAC,CACF,IAAI,GACJ,CAEV,CAAC,CACD,cAAeP,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}